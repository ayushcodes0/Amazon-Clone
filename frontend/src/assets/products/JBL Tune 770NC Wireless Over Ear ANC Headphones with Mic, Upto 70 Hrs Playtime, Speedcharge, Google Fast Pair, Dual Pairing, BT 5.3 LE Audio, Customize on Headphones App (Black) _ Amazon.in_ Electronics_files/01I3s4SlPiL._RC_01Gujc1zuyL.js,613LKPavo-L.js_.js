(function(b){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,a=d?d("DetailPageLayoutAssets",""):c;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,c,d){b.when("A","ready").execute(function(a){var b,d=a.$;a.on("a:expander:zones_progressive_disclosure_expander:toggle:collapse",function(a){(a=d("#dp-pr-top"))&&a.length||c.scrollTo({top:b})});a.on("a:expander:zones_progressive_disclosure_expander:toggle:expand",function(a){b=d(c).scrollTop()})})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("DetailPageBylineInfoAssets@core","DetailPageBylineInfo"):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
'use strict';(function(L){var B=window.AmazonUIPageJS||window.P,w=B._namespace||B.attributeErrors,na=w?w("SocialShareWidgetAUI","AmazonUI"):B;na.guardFatal?na.guardFatal(L)(na,window):na.execute(function(){L(na,window)})})(function(L,B,w){function na(t){if(Array.isArray(t)){for(var A=0,D=Array(t.length);A<t.length;A++)D[A]=t[A];return D}return Array.from(t)}"use strict";"use strict";L.register("SocialShareWidget",function(){var t;(function(){var A={353:function(u,a,k){Object.defineProperty(a,"__esModule",
{value:!0});var n=k(905),d=k(738);u=function(){function c(){var f=this;this.generateTimestampCollection=function(){var q=(new Date).getTimezoneOffset();q=f.getDateTimeByOffset(q);var v=f.getDateTimeByOffset(0);return{hitDay:q.split("T")[0],hitDatetime:q,hitDatetimeUtc:v}};this.getMarketplaceId=function(q){return"string"==typeof q?q:B.ue&&B.ue.mid?B.ue.mid:d.CSA_DEFAULT_VALUE.string};var b=this.generateTimestampCollection();this.csaMetricsData={schemaId:c.CSA_SCHEMA_ID,userAgentId:d.CSA_DEFAULT_VALUE.number,
hitDay:b.hitDay,hitDatetime:b.hitDatetime,hitDatetimeUtc:b.hitDatetimeUtc,pageType:B.ue_pty?B.ue_pty:d.CSA_DEFAULT_VALUE.string,subPageType:B.ue_spty?B.ue_spty:d.CSA_DEFAULT_VALUE.string,sessionId:B.ue&&B.ue.sid?B.ue.sid:d.CSA_DEFAULT_VALUE.string}}return c.prototype.withCSAClickEventData=function(f){var b=f.shareDataAttributes;if(this.csaMetricsData.customerId=b.customerId?b.customerId:d.CSA_DEFAULT_VALUE.string,this.csaMetricsData.httpRequestId=b.requestId?b.requestId:d.CSA_DEFAULT_VALUE.string,
this.csaMetricsData.asin=b.asin?b.asin:d.CSA_DEFAULT_VALUE.string,this.csaMetricsData.ingress=b.ingress?b.ingress:d.CSA_DEFAULT_VALUE.string,this.csaMetricsData.platform=b.platform?b.platform:d.CSA_DEFAULT_VALUE.string,this.csaMetricsData.isInternal=this.getCSANumberMapping(b.isInternal),this.csaMetricsData.isRobot=this.getCSANumberMapping(b.isRobot),this.csaMetricsData.channel=f.channel?f.channel:d.CSA_DEFAULT_VALUE.string,this.csaMetricsData.refMarker=f.refMarker?f.refMarker:d.CSA_DEFAULT_VALUE.string,
this.csaMetricsData.referrerUrl=f.refererURL?f.refererURL:d.CSA_DEFAULT_VALUE.string,this.csaMetricsData.marketplaceId=this.getMarketplaceId(b.marketplaceId),this.csaMetricsData.isExperiment=/T\d+/.test(f.treatment)?"Y":"N",this.csaMetricsData.triggeredFromScreenshotToast=!!b.triggeredFromScreenshotToast&&b.triggeredFromScreenshotToast,f.weblab)b=this.csaMetricsData.shareEntities,(b=void 0===b?{}:b)[f.weblab]=f.treatment,this.csaMetricsData.shareEntities=b;f.customizeShareCSAData&&(b=this.csaMetricsData.shareEntities,
b=void 0===b?{}:b,f.customizeShareCSAData.isCustomizedExperienceEnabled===d.TRUE&&(b.backgroundImagePhysicalId=f.customizeShareCSAData.backgroundImagePhysicalId,b.deviceCoverImagePhysicalId=f.customizeShareCSAData.deviceCoverImagePhysicalId,b.hasQuote=f.customizeShareCSAData.hasQuote,b.isCustomized=f.customizeShareCSAData.isCustomized,b.customizePreSelected=f.customizeShareCSAData.customizePreSelected,b.isQuotesAvailable=f.customizeShareCSAData.isQuotesAvailable,this.csaMetricsData.shareEntities=
b));f.isCustomShareOptionsSheetEnabled&&(b=this.csaMetricsData.shareEntities,(b=void 0===b?{}:b).isCustomShareOptionsSheetEnabled="1",this.csaMetricsData.shareEntities=b);f.caf&&(b=this.csaMetricsData.shareEntities,(b=void 0===b?{}:b).cafSwitchEnabled=f.cafSwitchEnabled?d.TRUE:d.FALSE,this.csaMetricsData.shareEntities=b);f.cafEdCXIngressWeblabTreatment&&(b=this.csaMetricsData.shareEntities,(b=void 0===b?{}:b).cafEdCxIngressWelabT1="T1"===f.cafEdCXIngressWeblabTreatment?d.TRUE:d.FALSE,b.cafEdCxIngressWelabT2=
"T2"===f.cafEdCXIngressWeblabTreatment?d.TRUE:d.FALSE);return this},c.prototype.withShareHitType=function(f){return this.csaMetricsData.shareHitType=f||d.CSA_DEFAULT_VALUE.string,this},c.prototype.getCSANumberMapping=function(f){return isNaN(Number(f))?2:Number(f)},c.prototype.getDateTimeByOffset=function(f){var b=new Date;0!==f&&(f*=c.MINUTES_TO_MILISECONDS,b=b.getTime()-f,b=new Date(b));return b.toISOString().split("Z")[0].split(".")[0]},c.prototype.logEvent=function(){(0,n.isCSALoaded)()&&B.csa(c.CSAPluginId,
{producerId:c.CSA_PRODUCER_ID})(c.CSA_LOG_EVENT,this.csaMetricsData)},c.MINUTES_TO_MILISECONDS=6E4,c.CSAPluginId="Events",c.CUSTOMIZE_SHARE_ENTITY_NAME="CustomizeShare",c.CSA_PRODUCER_ID="social-share",c.CSA_LOG_EVENT="log",c.CSA_SCHEMA_ID="SocialShareCSACustomEvent.CSAShareMetrics.8",c}();a.default=u},305:function(u,a){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(k,n){var d={email:{label:"Email",name:"email",ref:"em",shareBaseUrl:"mailto:",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/",
"email-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","email-squared.svg"),canOpenInPopup:!1,getSharingUrl:function(f){var b="?subject\x3d".concat(encodeURIComponent(k.emailSubject||k.title)),q="\x26body\x3d".concat(encodeURIComponent(k.title));f=encodeURIComponent(f||k.shareUrl.getReturnForChannel(this.ref));return"".concat(this.shareBaseUrl).concat(b).concat(q," ").concat(f)}},pi:{label:"Pinterest",name:"pinterest",ref:"pi",shareBaseUrl:"https://www.pinterest.com/pin/create/button/",
image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","pinterest-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","pinterest-squared.svg"),canOpenInPopup:!0,getSharingUrl:function(f){f="?url\x3d".concat(encodeURIComponent(f||k.shareUrl.getReturnForChannel(this.ref)));var b="\x26description\x3d".concat(encodeURIComponent(k.title)),q="\x26media\x3d".concat(encodeURIComponent(k.image));return"".concat(this.shareBaseUrl).concat(f).concat(b).concat(q,
"\x26method\x3dbutton")}},li:{label:"Line",name:"line",ref:"li",shareBaseUrl:"https://social-plugins.line.me/lineit/share",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","line-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","line-squared.svg"),canOpenInPopup:!0,getSharingUrl:function(f){var b="?text\x3d".concat(encodeURIComponent(k.text)," ").concat(encodeURIComponent(k.title));f="\x26url\x3d".concat(encodeURIComponent(f||k.shareUrl.getReturnForChannel(this.ref)));
return"".concat(this.shareBaseUrl).concat(b).concat(f)}},fb:{label:"Facebook",name:"facebook",ref:"fa",shareBaseUrl:"https://www.facebook.com/dialog/share",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","facebook-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","facebook-squared.svg"),canOpenInPopup:!0,getSharingUrl:function(f){f=encodeURIComponent(f||k.shareUrl.getReturnForChannel(this.ref));var b=encodeURIComponent(k.shareUrl.getReturnForChannel(this.ref).replace("_r_",
"_s_")),q=encodeURIComponent("#"+(k.hashtags[0]||"Amazon"));f=["?_encoding\x3dUTF8\x26app_id\x3d465632727431967\x26display\x3dpopup","href\x3d".concat(f),"redirect_uri\x3d".concat(b),"hashtag\x3d".concat(q)].join("\x26");return"".concat(this.shareBaseUrl).concat(f)}},tw:{label:"X",name:"x",ref:"tw",shareBaseUrl:"https://twitter.com/intent/tweet",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","x-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/",
"x-squared.svg"),canOpenInPopup:!0,getSharingUrl:function(f){var b="?text\x3d".concat(encodeURIComponent(k.title));f="\x26url\x3d".concat(encodeURIComponent(f||k.shareUrl.getReturnForChannel(this.ref)));var q="\x26hashtags\x3d".concat(k.hashtags.join(",")),v="\x26via\x3d".concat(encodeURIComponent("Amazon"));return"".concat(this.shareBaseUrl).concat(b).concat(f).concat(q).concat(v)}},wa:{label:"WhatsApp",name:"whatsapp",ref:"wa",shareBaseUrl:"https://api.whatsapp.com/send?text\x3d",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/",
"whatsapp-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","whatsapp-squared.svg"),canOpenInPopup:!0,getSharingUrl:function(f){f="\n              ".concat(encodeURIComponent(k.title),"\n              ").concat(encodeURIComponent(k.text),"\n              ").concat(encodeURIComponent(f||k.shareUrl.getReturnForChannel(this.ref)));return"".concat(this.shareBaseUrl).concat(f)}},sms:{label:"SMS",name:"sms",ref:"sms",shareBaseUrl:"sms:",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/",
"sms-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","sms-squared.svg"),canOpenInPopup:!1,getSharingUrl:function(f){f="\n              ".concat(encodeURIComponent(k.title),"\n              ").concat(encodeURIComponent(f||k.shareUrl.getReturnForChannel(this.ref)));return"".concat(this.shareBaseUrl).concat(f)}},embed:{label:"Embed",name:"embed",ref:"eb",shareBaseUrl:"",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","embed-circular.svg"),
imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","embed-squared.svg"),canOpenInPopup:!1,getSharingUrl:function(){return""}},copy:{label:"Copy",name:"copy",ref:"cp",shareBaseUrl:"",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","link-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","link-squared.svg"),canOpenInPopup:!1,getSharingUrl:function(){return""}}};if(null==n?0:n.length){var c={};return n.forEach(function(f){d[f]&&
(c[f]=d[f])}),c}return d}},738:function(u,a){Object.defineProperty(a,"__esModule",{value:!0});a.Err={Abort:"AbortError"};u=a.CSA_HIT_TYPE={};u.CLICK_SUCCESS="click_success";u.CLICK_ERROR="click_error";u.CLICK_CANCEL="click_cancel";u.SHARE="share";u.CUSTOMIZE_SHARE="click_customize_success";a.customize="customize";a.customShareOptions="customShareOptions";a.customizeShareStateKey="customizeShareCSAData";a.CSA_DEFAULT_VALUE={string:"unknown",number:0,boolean:2};a.CAF_LEARN_MORE_KEY="learn_more_link";
a.CAF_INFO_ICON_KEY="info_icon";a.UNKNOWN="unknown";a.DEFAULT_CSA_REF_ID="u_";a.EMPTY_STRING="";a.RAW_CHANNEL_PREFIX="raw:";a.CP_CHANNEL_REF="cp";a.CUSTOM_SHARE_OPTIONS_CP_CHANNEL_REF="cso_cp";a.CUSTOM_SHARE_OPTIONS_REF_PREFIX="cso";a.BOOKS_REF_PREFIX="bks";a.BOOKS_CUSTOMIZE_PREVIEW_NOT_AVAILABLE="t2cna";a.CAF_REF_PREFIX="caf";a.EMBED_CHANNEL_REF="eb";a.BEST_FORMAT_REF="ffobk";a.FALSE="false";a.TRUE="true";a.CUSTOM_SHEET_CLICK_LATENCY_METRIC="CustomShareSheet.Click";a.CAF_CUSTOM_SHEET_CLICK_LATENCY_METRIC=
"Caf.CustomShareSheet.Click";a.BOOKS_CUSTOM_SHEET_CLICK_LATENCY_METRIC="Books.CustomShareSheet.Click";a.SSF_AUI_PACKAGE_ATTRIBUTION="SocialShareWidgetAUI";a.REGEX_TO_REF_ID_AND_CHANNEL_APP={instagram:{refId:"in",channel:"Instagram"},snap:{refId:"sn",channel:"Snapchat"},discord:{refId:"di",channel:"Discord"},viber:{refId:"vi",channel:"Viber"},telegram:{refId:"te",channel:"Telegram"},pinterest:{refId:"pi",channel:"Pinterest"},qzone:{refId:"qz",channel:"QQ Zone"},renren:{refId:"re",channel:"Renren"},
twitter:{refId:"tw",channel:"Twitter"},airdrop:{refId:"ar",channel:"AirDrop"},tencentweibo:{refId:"tc",channel:"Tencent Weibo"},wechatmoment:{refId:"wm",channel:"WeChat Moment"},line:{refId:"li",channel:"Line"},whatsapp:{refId:"wa",channel:"Whatsapp"},weibo:{refId:"si",channel:"Sina Weibo"},facebook:{refId:"fb",channel:"Facebook"}};a.defaultShareDataAttributes={isInternal:a.CSA_DEFAULT_VALUE.boolean,isRobot:a.CSA_DEFAULT_VALUE.boolean,userAgent:a.CSA_DEFAULT_VALUE.number,platform:a.CSA_DEFAULT_VALUE.string,
ingress:a.CSA_DEFAULT_VALUE.string,asin:a.CSA_DEFAULT_VALUE.string,requestId:a.CSA_DEFAULT_VALUE.string,customerId:a.CSA_DEFAULT_VALUE.string,marketplaceId:a.CSA_DEFAULT_VALUE.string};a.defaultCustomizeShareCSAData={backgroundImagePhysicalId:a.EMPTY_STRING,deviceCoverImagePhysicalId:a.EMPTY_STRING,hasQuote:a.EMPTY_STRING,isCustomizedExperienceEnabled:a.EMPTY_STRING,isCustomized:a.EMPTY_STRING}},905:function(u,a,k){Object.defineProperty(a,"__esModule",{value:!0});a.isSafari=a.isCSALoaded=a.isNativeAppShareAvailable=
a.isNativeWebShareAvailable=a.isMobileWeb=a.isMobileApp=a.isDesktop=a.isIpadIOS=a.isIOS=a.isAndroid=a.isIE=a.isAUILoaded=a.isUeAvailable=a.isClipboardAvailable=a.isRTL=a.isTwisterAsin=a.context=a.Device=void 0;var n,d=k(161);!function(f){f.Android="apan";f.IOS="apin";f.MWeb="mwn";f.Other="ud"}(n||(a.Device=n={}));a.context=function(){var f=n.Other;(0,a.isMobileApp)()&&(0,a.isAndroid)()?f=n.Android:(0,a.isMobileApp)()&&(0,a.isIOS)()?f=n.IOS:(0,a.isMobileWeb)()&&(f=n.MWeb);var b="unknown";return(0,a.isMobileApp)()?
b="mshop":(0,a.isMobileWeb)()?b="mweb":(0,a.isDesktop)()&&(b="desktop"),{device:f,page:(0,a.isUeAvailable)()?B.ue_pty:"unknown",subPage:(0,a.isUeAvailable)()?B.ue_spty||B.ue_pti:"unknown",platform:b}};a.isTwisterAsin=function(){return!!B.isTwisterPage||!!B.twisterController||c};a.isRTL=function(){return"rtl"===document.dir};a.isClipboardAvailable=function(){return!!navigator.clipboard&&(0,d.isFunction)(navigator.clipboard.writeText)};a.isUeAvailable=function(){return!!B.ue};a.isAUILoaded=function(){var f;
return"undefined"!=typeof B&&(0,d.isString)(null===(f=null===B||void 0===B?void 0:B.P)||void 0===f?void 0:f.AUI_BUILD_DATE)};a.isIE=function(){return(0,d.testUserAgent)(/MSIE|Trident/i)};a.isAndroid=function(){return(0,d.testUserAgent)(/android.([1-9]|[L-Z])/i)&&!(0,d.testUserAgent)(/trident|Edge/i)};a.isIOS=function(){return(0,d.testUserAgent)(/OS [1-9][0-9]*(_[0-9]*)+ like Mac OS X/i)&&!(0,d.testUserAgent)(/trident|Edge/i)};a.isIpadIOS=function(){return(0,d.testUserAgent)(/[a-zA-z]{1,}\/[0-99].[0-99] \(Macintosh; [a-zA-z]{1,} Mac OS X [1-9][0-9]*_[1-9][0-9]*_[1-9][0-9]*\) AppleWebKit\/[1-9][0-9]*.[1-9][0-9]*.[1-9][0-9]*/)||
(0,d.testUserAgent)(/iPad/)};a.isDesktop=function(){return!((0,a.isAndroid)()||(0,a.isIOS)()||(0,a.isMobileApp)()||(0,a.isMobileWeb)())};a.isMobileApp=function(){return/(Windowshop|Amazon|Amazon\.com)\//.test((0,d.getCookie)("amzn-app-id"))};a.isMobileWeb=function(){return 450>=B.screen.availWidth&&((0,d.testUserAgent)(/mobile|mini/i)||(0,a.isAndroid)()||(0,a.isIOS)())};a.isNativeWebShareAvailable=function(){return B.navigator&&(0,d.isFunction)(B.navigator.share)};a.isNativeAppShareAvailable=function(f){return f&&
(0,d.isFunction)(f.share)};a.isCSALoaded=function(){return(0,d.isFunction)(B.csa)};a.isSafari=function(){var f;return/apple/i.test(null===(f=B.navigator)||void 0===f?void 0:f.vendor)};var c=!1;(0,a.isAUILoaded)()&&B.P.when("mobile-inline-twister-critical").execute(function(){c=!0});a.default={context:a.context,isTwisterAsin:a.isTwisterAsin,isClipboardAvailable:a.isClipboardAvailable,isUeAvailable:a.isUeAvailable,isAUILoaded:a.isAUILoaded,isIE:a.isIE,isAndroid:a.isAndroid,isDesktop:a.isDesktop,isIOS:a.isIOS,
isIpadIOS:a.isIpadIOS,isMobileApp:a.isMobileApp,isMobileWeb:a.isMobileWeb,isNativeWebShareAvailable:a.isNativeWebShareAvailable,isNativeAppShareAvailable:a.isNativeAppShareAvailable,isCSALoaded:a.isCSALoaded,isSafari:a.isSafari,isRTL:a.isRTL}},495:function(u,a,k){Object.defineProperty(a,"__esModule",{value:!0});var n=k(905),d=k(353),c=k(738);u=function(){function f(){}return f.logCountOnce=function(b){(0,n.isUeAvailable)()&&B.ue.count(b,(B.ue.count(b)||0)+1)},f.emitFullMetricName=function(b,q,v){var E=
this;(0,n.isAUILoaded)()&&B.P.when("A").execute(function(e){e.trigger("".concat(E.BASE_METRIC_NAME,":metrics:logged"),{fullMetricName:b,callee:q,message:v})})},f.logCounter=function(b,q){q=q?".".concat(q):"";b="".concat(this.BASE_METRIC_NAME,".").concat(b).concat(q);this.emitFullMetricName(b,"logCounter");this.logCountOnce(b)},f.logCounterRefactor=function(b,q){q=q?".".concat(q.toLowerCase()):"";b="".concat(this.BASE_METRIC_NAME).concat(q,".").concat(this.platform).concat(this.metricName,".").concat(b.toLowerCase());
this.emitFullMetricName(b,"logCounterRefactor");this.logCountOnce(b)},f.logLoad=function(b){b="".concat(this.BASE_METRIC_NAME,".").concat(this.platform).concat(this.metricName,".").concat(b.toLowerCase());this.logCountOnce(b)},f.logFatal=function(b){(0,n.isAUILoaded)()&&B.P.log(b,"FATAL",this.BASE_METRIC_NAME)},f.logCSAEvent=function(b,q){(0,n.isCSALoaded)()&&(new d.default).withCSAClickEventData(q).withShareHitType(b).logEvent()},f.startTimer=function(b){b="".concat(this.BASE_METRIC_NAME,".").concat(this.LATENCY,
".").concat(b);this.timers[b]=B.uet&&B.uet("bb",b,{wb:1})},f.stopTimer=function(b){b="".concat(this.BASE_METRIC_NAME,".").concat(this.LATENCY,".").concat(b);var q=this.timers[b];(0,n.isUeAvailable)()&&q&&(q=B.uet("be",b,{wb:1})-q,B.ue.count(b,q),B.uex&&B.uex("ld",b,{wb:1}),this.emitFullMetricName(b,"stopTimer","".concat(q,"ms")),delete this.timers[b],this.timers["".concat(b,"_done_in")]=q)},f.BASE_METRIC_NAME="SocialShareFramework",f.LATENCY="Latency",f.platform=c.UNKNOWN,f.metricName="",f.timers=
{},f.getMetricName=function(b,q){var v;if(void 0===q&&(q=""),(0,n.isUeAvailable)()){var E=(0,n.context)();f.platform=E.platform;f.metricName=q?".".concat(q.toLowerCase()):""}b=b('[data-action\x3d"ssf-share-icon"]').data();q=q?".".concat(q):"";return b?(b=(null===(v=b.ssfShareIcon)||void 0===v?void 0:v.shareDataAttributes)||{},v=b.ingress,b=b.platform,b=void 0===b?"unknown":b,"".concat(void 0===v?"unknown":v,".").concat(b).concat(q).toLowerCase()):""},f}();a.default=u},241:function(u,a,k){Object.defineProperty(a,
"__esModule",{value:!0});var n,d=k(905),c=k(738);!function(f){f.RETURN="r";f.CLICK="cl"}(n||(n={}));u=function(){function f(b,q){if(void 0===b&&(b="ur"),void 0===q&&(q=void 0),this.PREFIX="cm_sw",this.id="",this.refId="",this._isBestFormatEnabled=!1,this.cxt={device:d.Device.Other,page:"",subPage:"",platform:c.UNKNOWN},2>b.length)throw new TypeError("refId must be 2 or more characters long");this.refId=b;this.cxt=(0,d.context)();this.treatment=q;this.generateUniqueId()}return Object.defineProperty(f.prototype,
"isBestFormatEnabled",{set:function(b){this._isBestFormatEnabled=b},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"return",{get:function(){return this.get(n.RETURN)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"click",{get:function(){return this.get(n.CLICK)},enumerable:!1,configurable:!0}),f.prototype.getReturnForChannel=function(b){var q,v=null!==(q=this.treatment)&&void 0!==q?q:"";return[this.PREFIX,n.RETURN,this._isBestFormatEnabled?c.BEST_FORMAT_REF:
"",b,this.cxt.device,this.refId,v,this.id].filter(function(E){return E&&""!==E}).join("_")},f.prototype.getClickForChannel=function(b){return[this.PREFIX,n.CLICK,this._isBestFormatEnabled?c.BEST_FORMAT_REF:"",b,this.cxt.device,this.refId,this.id].filter(function(q){return q&&""!==q}).join("_")},f.prototype.generateUniqueId=function(){var b,q=null===(b=null===B||void 0===B?void 0:B.ue)||void 0===b?void 0:b.rid;return q||(q="".concat(Math.random().toString(36).slice(2)).concat(Math.random().toString(36).slice(2)).substring(0,
13)),this.id=q},f.prototype.get=function(b){var q,v=null!==(q=this.treatment)&&void 0!==q?q:"";return[this.PREFIX,b,this._isBestFormatEnabled?c.BEST_FORMAT_REF:"",this.cxt.device,this.refId,v,this.id].filter(function(E){return E&&""!==E}).join("_")},f}();a.default=u},198:function(u,a,k){var n=this&&this.__assign||function(){return n=Object.assign||function(E){for(var e,g=1,h=arguments.length;g<h;g++)for(var p in e=arguments[g])Object.prototype.hasOwnProperty.call(e,p)&&(E[p]=e[p]);return E},n.apply(this,
arguments)};Object.defineProperty(a,"__esModule",{value:!0});var d,c=k(495),f=k(905),b=k(474),q=k(161),v=k(738);(0,f.isAUILoaded)()&&B.P.when("mash").execute(function(E){return d=E});u=function(){function E(e){this.sheetOptions={title:v.EMPTY_STRING,text:v.EMPTY_STRING,shareUrl:new b.default("http://amazon.com/","ur"),lang:"en",shareDataAttributes:v.defaultShareDataAttributes,refererURL:"",image:"",customizeShareCSAData:v.defaultCustomizeShareCSAData,isCustomShareOptionsSheetEnabled:!1};this.sheetOptions=
n(n({},this.sheetOptions),e);this.shareUrl=e.shareUrl}return E.prototype.launchNativeWeb=function(){var e,g=this,h=this.sheetOptions.shareDataAttributes.ingress,p={channel:v.EMPTY_STRING,refMarker:this.shareUrl.refMarker.click,refererURL:this.sheetOptions.refererURL,shareDataAttributes:this.sheetOptions.shareDataAttributes,customizeShareCSAData:this.sheetOptions.customizeShareCSAData},l=this.shareUrl.return;this.sheetOptions.tinyUrl&&(l=this.sheetOptions.tinyUrl,c.default.logCounter("MWeb.Tiny.Success"),
c.default.logCounterRefactor("Tiny.Success",h));var x=(0,q.isFunction)(this.sheetOptions.sheetShownCallback);try{null===(e=null===B||void 0===B?void 0:B.navigator)||void 0===e||e.share({url:l,title:this.sheetOptions.title,text:this.sheetOptions.text}).then(function(){x&&g.sheetOptions.sheetShownCallback();c.default.logCSAEvent(v.CSA_HIT_TYPE.CLICK_SUCCESS,p);c.default.logCSAEvent(v.CSA_HIT_TYPE.SHARE,p);c.default.logCounterRefactor("ChannelClick",g.sheetOptions.shareDataAttributes.ingress);c.default.logCounter("ShareClick")}).catch(function(m){x&&
g.sheetOptions.sheetShownCallback();c.default.logCSAEvent(v.CSA_HIT_TYPE.CLICK_SUCCESS,p);m.name===v.Err.Abort&&c.default.logCSAEvent(v.CSA_HIT_TYPE.CLICK_CANCEL,p)})}catch(m){c.default.logCSAEvent(v.CSA_HIT_TYPE.CLICK_ERROR,p)}},E.prototype.launchNativeApp=function(){var e=this,g=this.shareUrl.refMarker.click,h=this.sheetOptions.shareDataAttributes,p=this.sheetOptions.refererURL,l=this.sheetOptions.customizeShareCSAData,x=this.sheetOptions.shareDataAttributes.ingress,m=v.EMPTY_STRING,G=this.sheetOptions.caf||
!1,M=this.sheetOptions.cafSwitchEnabled||!1,I=this.sheetOptions.isCustomShareOptionsSheetEnabled||!1,J=this.shareUrl.return;this.sheetOptions.tinyUrl&&(J=this.sheetOptions.tinyUrl,c.default.logCounter("MShop.Tiny.Success"),c.default.logCounterRefactor("Tiny.Success",x));var r={channel:m,refMarker:g,refererURL:p,shareDataAttributes:h,customizeShareCSAData:l,caf:G,cafSwitchEnabled:M,isCustomShareOptionsSheetEnabled:I};g={messagePlain:this.getShareMessage,messagePlain160:this.getShare160Message,messagePlain140:this.getShare140Message,
messageHTML:this.getShareMessage,url:J,imageURL:this.sheetOptions.image,subject:this.sheetOptions.text};null==d||d.share(n(n({},g),{successCallback:function(){(0,q.isFunction)(e.sheetOptions.sheetShownCallback)&&e.sheetOptions.sheetShownCallback();c.default.logCSAEvent(v.CSA_HIT_TYPE.CLICK_SUCCESS,r)},failCallback:function(){c.default.logCSAEvent(v.CSA_HIT_TYPE.CLICK_ERROR,r)},shareServiceSelectedCallback:function(z){z&&"'null'"!==z?((0,q.isFunction)(e.sheetOptions.channelSelectCB)&&e.sheetOptions.channelSelectCB(z),
r.channel=e.getChannelByKeyword(z).channel,z=e.getChannelByKeyword(z).refId,r.refMarker=e.shareUrl.refMarker.getClickForChannel(z),c.default.logCSAEvent(v.CSA_HIT_TYPE.SHARE,r),c.default.logCounterRefactor("ChannelClick",e.sheetOptions.shareDataAttributes.ingress),c.default.logCounter("ShareClick"),(0,q.isFunction)(e.sheetOptions.sdTooltipCallback)&&e.sheetOptions.sdTooltipCallback()):c.default.logCSAEvent(v.CSA_HIT_TYPE.CLICK_CANCEL,r)}}))},E.prototype.launch=function(e){(0,f.isNativeAppShareAvailable)(d)?
this.launchNativeApp():(0,f.isNativeWebShareAvailable)()?this.launchNativeWeb():(0,q.isFunction)(e)?e():(c.default.logCounter("Click.ShareUnavailable"),c.default.logCounterRefactor("Click.ShareUnavailable",this.sheetOptions.shareDataAttributes.ingress))},Object.defineProperty(E.prototype,"getShare160Message",{get:function(){var e=this.sheetOptions.tinyUrl||this.shareUrl.return,g=(0,q.truncate)(this.sheetOptions.title,160-(e.length+2));return"".concat(g," ").concat(e)},enumerable:!1,configurable:!0}),
Object.defineProperty(E.prototype,"getShare140Message",{get:function(){var e=this.sheetOptions.tinyUrl||this.shareUrl.return,g=(0,q.truncate)(this.sheetOptions.title,140-(e.length+2));return"".concat(g," ").concat(e)},enumerable:!1,configurable:!0}),E.prototype.getRefByRegex=function(e){return v.REGEX_TO_REF_ID_AND_CHANNEL_APP[e].refId},E.prototype.getChannelByRegex=function(e){return v.REGEX_TO_REF_ID_AND_CHANNEL_APP[e].channel},E.prototype.getChannelByKeyword=function(e){var g=v.RAW_CHANNEL_PREFIX+
e,h=v.DEFAULT_CSA_REF_ID,p=e.match(RegExp("instagram|snap|discord|viber|telegram|pinterest|qzone|renren|twitter|airdrop|tencentweibo|wechatmoment|line|whatsapp|weibo|^Facebook$","ig"));if(p&&p.length)return{channel:this.getChannelByRegex(p[0].toLowerCase()),refId:this.getRefByRegex(p[0].toLowerCase())};switch(!0){case /android.messaging|sms|android.apps.messaging|mms/gi.test(e):g="SMS";h="sm";break;case /outlook|mail/gi.test(e):g="Email";h="em";break;case /clipboardactivity|copy/gi.test(e):g="Copy";
h="cp";break;case /facebook.composer/gi.test(e):g="Facebook";h="fb";break;case /facebook.messenger|FacebookMessenger/gi.test(e):g="FacebookMessenger";h="fm";break;case /tencent|wechat/gi.test(e):g="WeChat";h="we";break;case /unknown|null/gi.test(e):g="unknown",h="u"}return{channel:g,refId:h}},Object.defineProperty(E.prototype,"getShareMessage",{get:function(){var e=this.sheetOptions.tinyUrl||this.shareUrl.return;return"".concat(this.sheetOptions.title," ").concat(e)},enumerable:!1,configurable:!0}),
E}();a.default=u},474:function(u,a,k){Object.defineProperty(a,"__esModule",{value:!0});var n=k(241);u=function(){function d(c,f,b){this.REF_PARAM_NAME="ref_";d.isValid(c)||(c=d.getDefault());this.url=new URL(c);this._refMarker=new n.default(f,b)}return d.prototype.getUpdatedUrl=function(c){var f=new URL(this.raw);return f.searchParams.set(this.REF_PARAM_NAME,c),f.toString()},Object.defineProperty(d.prototype,"raw",{get:function(){return this.url.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,
"refMarker",{get:function(){return this._refMarker},enumerable:!1,configurable:!0}),d.isValid=function(c){try{new URL(c)}catch(f){return!1}return!0},d.getDefault=function(){var c,f,b=null===(c=null===B||void 0===B?void 0:B.location)||void 0===c?void 0:c.href;if(!b)return(null===(f=null===B||void 0===B?void 0:B.ue)||void 0===f?0:f.sn)?"https://".concat(B.ue.sn):"https://amazon.com";c=new URL(b);f=c.searchParams.has("psc")?"?psc\x3d1":"";return B.ue_pti?"".concat(B.location.origin,"/dp/").concat(B.ue_pti).concat(f):
(c.search=f,c.href)},d.prototype.getReturnForChannel=function(c){c=this._refMarker.getReturnForChannel(c);return this.getUpdatedUrl(c)},d.prototype.getClickForChannel=function(c){c=this._refMarker.getClickForChannel(c);return this.getUpdatedUrl(c)},Object.defineProperty(d.prototype,"return",{get:function(){return this.getUpdatedUrl(this._refMarker.return)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"click",{get:function(){return this.getUpdatedUrl(this._refMarker.click)},enumerable:!1,
configurable:!0}),d}();a.default=u},161:function(u,a){Object.defineProperty(a,"__esModule",{value:!0});a.getDPXObject=a.sanitizeInput=a.getCookie=a.testUserAgent=a.truncate=a.isString=a.isEmpty=a.isNumber=a.isFunction=void 0;a.isFunction=function(k){return"function"==typeof k};a.isNumber=function(k){return!isNaN(k)&&"number"==typeof k};a.isEmpty=function(k){return!k||!k.length};a.isString=function(k){return"string"==typeof k};a.truncate=function(k,n){void 0===k&&(k="");var d=Array(3).fill(".");return k.length>
n?k.substring(0,n-3)+d.join(""):k};a.testUserAgent=function(k){if(!B&&!B.navigator)return!1;try{return k.test(B.navigator.userAgent)}catch(n){return!1}};a.getCookie=function(k){k="".concat(k,"\x3d");for(var n=document.cookie.split(";"),d=0;d<n.length;d++){for(var c=n[d];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(k))return c.substring(k.length,c.length)}return""};a.sanitizeInput=function(k){return k.replace(/[<>&'"]/g,function(n){switch(n){case "\x3c":return"\x26lt;";case "\x3e":return"\x26gt;";
case "\x26":return"\x26amp;";case "'":return"\x26#39;";case '"':return"\x26quot;";default:return n}})};a.getDPXObject=function(){var k,n;return null===(n=null===(k=B.DetailPage)||void 0===k?void 0:k.StateController)||void 0===n?void 0:n.state};a.default={isFunction:a.isFunction,isNumber:a.isNumber,isEmpty:a.isEmpty,isString:a.isString,truncate:a.truncate,testUserAgent:a.testUserAgent,getCookie:a.getCookie,getDPXObject:a.getDPXObject}},156:function(u,a){Object.defineProperty(a,"__esModule",{value:!0});
a.default={}},519:function(u,a,k){Object.defineProperty(a,"__esModule",{value:!0});a.SocialShareCore=void 0;u=k(305);var n=k(474),d=k(156),c=k(495),f=k(198),b=k(241),q=k(905),v=k(738);k=k(161);a.SocialShareCore={Channels:u.default,Url:n.default,Translations:d.default,Metrics:c.default,ShareSheet:f.default,RefMarker:b.default,Detection:q.default,Constants:v,ToolBelt:k};a.default=a.SocialShareCore}},D={};t=function k(a){var n=D[a];if(void 0!==n)return n.exports;n=D[a]={exports:{}};return A[a].call(n.exports,
n,n.exports,k),n.exports}(519)})();return t});"use strict";L.register("SocialShareWidgetConfig",function(){var t=Object.freeze({MODAL:"modal",POPOVER:"popover"}),A=Object.freeze({IOS:"ios",ANDROID:"android",ARROW:"arrow",VARIABLE:"variable"});return{WIDGET_TYPE:t,WIDGET_ICON:A,excludedChannels:["sms","wa"],lineMarketplaces:["A1VC38T7YXB528"],cnMarketplace:["AAHKV2X7AFYLW"],nonCNChannels:["fb","tw","pi"],defaultShareData:{url:"",title:location.hostname,text:"",image:"",hashtags:["Amazon"],type:t.POPOVER,
lang:"en",refId:"ts",channels:[],refererURL:"",treatment:"",weblab:"",customize:!1,previewDoh:!1,caf:!1,displayCustomShareSheet:!1,cafSwitch:!1,eventPreviewTreatment:"C",cafIngressId:"",t:{},associateLink:{},popoverPosition:"triggerBottom",popoverDistance:48,defaultCustomShareOptions:{email:{label:"Email",image:"customchannels-email.png",ref:"em",shareUrl:"mailto:?subject\x3d{subject}\x26body\x3d{body}\x26url\x3d{url}",className:"email",stringId:"taf_customshare_email"},copy:{label:"Copy",image:"customchannels-link.png",
ref:"cp",shareUrl:"",className:"custom-share-copy",stringId:"taf_customshare_copy"},more:{label:"More",image:"customchannels-more.png",ref:"",shareUrl:"",className:"custom-share-native-sheet",stringId:"taf_customshare_more"}},isFallbackShareUrlEnabled:!1,isNewIMessagePreviewGating:!1,isOnShareGatingEnabled:!1,isIpadFixesEnabled:!1,isNewWhatsAppPreview:!1,skipTwisterAPI:"C",isBestFormatEnabled:!1,isCafPreviewGenerationMigrationEnabled:!1,isUnrecognizedUsersRichPreviewEnabled:!1,customizePreSelected:!1,
isAndroidCopyLinkGatingEnabled:!1,isUnsignedShareSheetGatingEnabled:!1,isUnsignedShareSheetCopyLinkOverrideEnabled:!1,isShortTitleGatingEnabled:!1,isShortTitleAsyncGatingEnabled:!1,titleSource:""},defaultWidgetData:{icon:A.VARIABLE,background:!0,width:24},shareDataAttributes:{isInternal:2,isRobot:2,userAgent:B.navigator.userAgent,platform:"DESKTOP",ingress:B.ue_pty,asin:B.ue_pti,requestId:B.ue_id,customerId:"",marketplaceId:B.ue_mid,triggeredFromScreenshotToast:!1},iconMap:{ios:"https://m.media-amazon.com/images/G/01/share-icons/share-std.svg",
android:"https://m.media-amazon.com/images/G/01/share-icons/share-android.svg",arrow:"https://m.media-amazon.com/images/G/01/share-icons/share-icon-experiment.svg"},customShareOptions:[]}});"use strict";L.when("A","SocialShareWidget","SocialShareWidgetTemplating","SocialShareWidgetConfig","SocialShareWidgetState","SocialShareWidgetNativeUtils").register("SocialShareWidgetAUI",function(t,A,D,u,a,k){var n=A.SocialShareCore,d=n.Metrics,c=0,f=function(){},b=!1,q=d.getMetricName(t.$);d.startTimer(q);d.logCounter("DPX.Desktop.ImageBlockRender");
try{(function(){var v=t.$,E=n.Detection,e=n.Translations,g=n.Channels,h=n.Url,p=n.Constants,l=function(F){F=F.data("share")||F.find("[data-share]").data("share");return t.extend({},u.defaultWidgetData,F)},x=v(".ssf-share-trigger"),m=u.defaultShareData,G=l(x),M=m.url,I=v("#ac-getlink-bottomsheet"),J=v('[data-action\x3d"ssf-share-icon"]'),r=function(){var F=u.iconMap;if(G.icon===u.WIDGET_ICON.ARROW)return F.arrow;if(E.isDesktop())return F.ios;if(G.icon===u.WIDGET_ICON.VARIABLE){var y=t.$("#ssf-primary-widget-desktop");
m=t.extend(m,y.data("ssfShareIcon"));y=F.android;if(E.isIOS()||m.isIpadFixesEnabled&&E.isIpadIOS())y=F.ios;return y}return F[G.icon]},z=function(F){F.find('[class*\x3d"ssf-multi-"]').length||F.find(".ssf-share-trigger").addClass("ssf-multi-"+Math.random().toString(36).slice(2));x=F.find('[class*\x3d"ssf-multi-"]')},C=void 0,O=void 0,U=void 0,Q=void 0,W=void 0,X=void 0,ca=void 0;L.when("a-sheet").execute(function(F){return C=F});L.when("a-popover").execute(function(F){return O=F});L.when("a-modal").execute(function(F){return U=
F});L.when("SocialShareWidgetTiny").execute(function(F){return ca=F});var aa=function(F,y){var H=2<arguments.length&&arguments[2]!==w?arguments[2]:"ssf-share-bottom-sheet",P=m.displayCustomShareSheet||m.customize||m.caf;if(!Q||P)Q=C.create({name:H,inlineContent:F,closeType:"icon",height:y});C.showSheet(Q)},Y=function(F){var y=F.type===u.WIDGET_TYPE.POPOVER&&O,H=F.type===u.WIDGET_TYPE.MODAL&&U;F=D.build(F);C?aa(F.getBottom()):y?(y=F.getPopover(),x.hasClass("a-declarative")||(W=O.create(x,{name:"ssf-share-popover",
position:m.popoverPosition,inlineContent:y,activate:"onclick",closeButton:!0,width:160,padding:"none",popoverLabel:"Share Popup",closeButtonLabel:"Close Share Popup"}).show())):H&&(y=F.getModal(),x.hasClass("a-declarative")||(X=U.create(x,{name:"ssf-share-modal",inlineContent:y,width:600,popoverLabel:"Share Modal"}).show()))},ja=function(F){if(F.displayCustomShareSheet||F.customize||F.caf)d.logCounter("webview.sharesheet.caf.background"),d.logCounterRefactor("webview.sharesheet.caf.background",F.shareDataAttributes.ingress),
L.when("mash").execute(function(y){y.addEventListener("appPause",fa)})},ka=function(F){L.when("SocialShareWidgetCustomize").execute(function(y){D.build(F).getCustomize(function(H){aa(H,650,"ssf-customize-bottom-sheet");y.init(F,Y,fa);ja(F)})})},fa=function y(){L.when("mash").execute(function(H){H.removeEventListener("appPause",y)});W&&O.get(x).hide();Q&&C.hideSheet(Q);X&&U.get(x).hide()},N=function(){var y=m.shareDataAttributes.asin,H=B.DetailPage;if(!H)return!1;H=H.StateController&&H.StateController.getState().current_asin;
m.shareDataAttributes.asin="string"==typeof H?H:y;return y!==H},K=function(y,H,P){var T=y.shareDataAttributes,V=y.t;d.logCSAEvent(p.CSA_HIT_TYPE.SHARE,H);d.logCounter("DPX.Desktop.CopySuccess");d.logCounter("Share.CopySuccess");d.logCounter(q,"CopySuccess");d.logCounterRefactor("CopySuccess",T.ingress);E.isDesktop()?function(){var Z=P.find(".copy-label");Z.text(V.taf_copy_url_changeover);t.delay(function(){fa();Z.text(V.taf_copy_name)},1E3)}():(v(".ssf-feedback").show(),fa())},R=function(y){d.logCSAEvent(p.CSA_HIT_TYPE.CLICK_ERROR,
y);d.logCounter("DPX.Desktop.CopyFailure");d.logCounter("Share.CopyFailure");d.logCounter(q,"CopyFailure")},S=function(y){var H=y.shareData,P=y.channelRef,T=H.shareUrl;y=H.socialLinks;var V=y===w?{}:y;y=H.isOGTEnabled;y=y===w?!1:y;var Z=H.dealsPreviewEnabled;Z=Z===w?!1:Z;var da=H.eventPreviewTreatment;da=da===w?"C":da;T.refMarker.isBestFormatEnabled=H.isBestFormatEnabled;P=P?T.getReturnForChannel(P):T.return;T=V.shareframework||H.url;V=H.aapiBaseUrl;V=V===w?"":V;var ba=H.shareAapiCsrfToken;ba=ba===
w?"":ba;var ea=H.tinyUrlEnabled;ea=ea===w?!1:ea;var ha=H.deeplinkInfo;ha=ha===w?{}:ha;var ia=H.storeId;ia=ia===w?"":ia;var la=H.shareDataAttributes,ma=la.marketplaceId;ma=ma===w?"":ma;la=la.ingress;la=la===w?"":la;H.isUnrecognizedUsersRichPreviewEnabled&&(P=new URL(P),P.searchParams.append("starsLeft",1),P=P.toString());"c"!==da.toLowerCase()&&(P=new URL(P),H=da.match(/^T(\d+)$/),P.searchParams.append("peakEvent",H[1]),P.searchParams.append("dealEvent",Z?"1":"0"),P=P.toString(),d.logCounterRefactor("EventPreview"+
da,la));return{tinyUrlEnabled:ea,aapiBaseUrl:V,shareAapiCsrfToken:ba,marketplaceId:ma,url:P,isOGTEnabled:y,originalUrl:T||P,refMarkerId:c++,deeplinkInfo:ha,storeId:ia}};v(document).delegate(".ssf-channel:not(.copy,.embed)","click",function(y){y.preventDefault();y.stopPropagation();d.logCounter("DPX.Desktop.ChannelClick");d.logCounter("ShareClick");d.logCounter(q,"ChannelClick");d.logCounterRefactor("ChannelClick",m.shareDataAttributes.ingress);var H=v(this),P=H.data("key"),T=m;y=T.refererURL;var V=
T.shareDataAttributes,Z=T.treatment;Z=Z===w?"":Z;var da=T.weblab;da=da===w?"":da;var ba=T.builtChannels[P],ea=ba.ref;P=T.shareUrl.refMarker.getClickForChannel(ea);T=ba.name;var ha=ba.getSharingUrl();d.logCSAEvent(p.CSA_HIT_TYPE.SHARE,{channel:T,refMarker:P,refererURL:y,shareDataAttributes:V,treatment:Z,weblab:da});y=S({shareData:m,channelRef:ea});k.showSpinner(H);ca.fetch({data:y,callback:function(ia){k.hideSpinner(H);ia&&(ha=ba.getSharingUrl(ia),d.logCounter("Desktop.Tiny.Success"),d.logCounterRefactor("Tiny.Success",
V.ingress));if("em"===ea)B.open(ha,"_self");else if(E.isDesktop()){ia=screen.width;var la=screen.height,ma="pi"===ea?900:600,pa=Math.min(ma,.7*ia);ma=Math.min(ma,.7*la);B.open(ha,"_blank","toolbar\x3d0,status\x3d0,width\x3d"+pa+",height\x3d"+ma+",top\x3d"+(la/2-ma/2)+",left\x3d"+(ia/2-pa/2))}else B.open(ha,"_blank");fa();t.trigger("ssf:event:share",m)}})});t.declarative("ssf-share-icon","click",function(y){d.logCounter("DPX.Desktop.SheetClick");d.logCounter("SheetClick");d.logCounter(q,"SheetClick");
if(b)return fa();z(y.$currentTarget);m=t.extend(m,y.data);m.shareDataAttributes=t.extend(u.shareDataAttributes,y.data.shareDataAttributes);var H=m.shareDataAttributes.ingress;d.logCounterRefactor("SheetClick",H);if(!t.objectIsEmpty(y.data.associateLink)&&I.length)d.logCounter("SheetClick.Associate"),t.trigger("ac-getlink-bottomsheet-event",m);else{t.extend(e[m.lang],m.t);var P=g(m,m.channels);m.builtChannels=P;m.url=m.url.startsWith("/")?""+B.location.origin+m.url:m.url;m.shareUrl=new h(m.url,m.refId);
N()&&(m.shareUrl=new h(m.url,m.refId),m.shareUrl.url.searchParams.set("psc",1));a.set("shareData",m);!E.isDesktop()||m.isIpadFixesEnabled&&E.isIpadIOS()&&E.isNativeWebShareAvailable()?m.displayCustomShareSheet||m.customize||m.caf?ka(m):k.launchNativeShareSheet(y,m,S,Y):(m.isUnrecognizedUsersRichPreviewEnabled&&m.shareUrl.url.searchParams.set("starsLeft",1),m.image=m.image||v("#imgTagWrapperId img").attr("src"),Y(m),d.logCounter("DPX.Desktop.SheetOpen"),d.logCounter("SheetOpen"),d.logCounter(q,"SheetOpen"),
d.logCounterRefactor("SheetOpen",H),d.logCSAEvent(p.CSA_HIT_TYPE.CLICK_SUCCESS,{channel:p.EMPTY_STRING,refMarker:m.shareUrl.refMarker.click,refererURL:m.refererURL,shareDataAttributes:m.shareDataAttributes,treatment:m.treatment||"",weblab:m.weblab||""}));E.isSafari()&&E.isDesktop()&&(y=S({shareData:m,channelRef:p.CP_CHANNEL_REF}),ca.fetch({data:y,callback:function(T){d.logCounter("TinyUrlOnSheetOpen");M=T}}));t.trigger("ssf:event:sheetOpen",m)}});v(document).delegate(".ssf-copy,.ssf-channel.copy",
"click",function(y){d.logCounter("ShareClick");d.logCounter("DPX.Desktop.ChannelClick");d.logCounter(q,"ChannelClick");d.logCounterRefactor("ChannelClick",m.shareDataAttributes.ingress);y.preventDefault();var H=m;y=H.shareUrl;var P=H.shareDataAttributes,T=H.treatment;T=T===w?"":T;var V=H.weblab;V=V===w?"":V;H=H.isBestFormatEnabled;var Z=p.CP_CHANNEL_REF,da=y.refMarker.getClickForChannel(Z),ba={channel:p.CP_CHANNEL_REF,refMarker:da,shareDataAttributes:P,treatment:T,weblab:V},ea=v(this);y.refMarker.isBestFormatEnabled=
H;var ha=y.getReturnForChannel(Z);E.isSafari()&&E.isDesktop()?navigator.clipboard.writeText(M||ha).then(function(){K(m,ba,ea)},function(){R(ba)}):(y=S({shareData:m,channelRef:Z}),k.showSpinner(ea),ca.fetch({data:y,callback:function(ia){k.hideSpinner(ea);navigator.clipboard.writeText(ia||ha).then(function(){K(m,ba,ea)},function(){R(ba)})}}));t.trigger("ssf:event:share",m)});v(document).delegate(".ssf-embed,.ssf-channel.embed","click",function(y){y.preventDefault();var H=m;y=H.shareDataAttributes;var P=
H.treatment;P=P===w?"":P;var T=H.weblab;T=T===w?"":T;H={channel:"embed",refMarker:H.shareUrl.refMarker.getClickForChannel(p.EMBED_CHANNEL_REF),shareDataAttributes:y,treatment:P,weblab:T};d.logCSAEvent(p.CSA_HIT_TYPE.SHARE,H);d.logCounter("DPX.Desktop.ChannelClick");d.logCounter(q,"ChannelClick");d.logCounter("ChannelClick.Embed");d.logCounter("ShareClick");d.logCounterRefactor("ChannelClick",y.ingress);U.create(v(".ssf-channel.embed"),m.kpModalParams).show()});f=function(){x=v(".ssf-share-trigger");
G=l(x);var y=G.width;if(!v(".ssf-background").length&&G.background){var H=1.4*y;H=v('\x3cdiv class\x3d"ssf-background'+(G.floatedIcon?"-float":"")+'"\x3e\x3c/div\x3e').css({width:H,height:H});x.wrap(H)}G.icon&&x.css({height:y,width:y,backgroundImage:"url("+r()+")"})};E.isIE()&&v(".ssf-share-trigger,.ssf-background").remove();t.on("a:popover:afterUpdatePosition:ssf-share-popover",function(y){y=y.popover.$popover;var H=y.position().left-m.popoverDistance;y.find(".a-arrow-border").css({right:24,left:""});
y.css({left:H})});t.on("ssf:event:trigger-share-widget",function(y){t.trigger("a:declarative:ssf-share-icon:click",{data:y,$currentTarget:(1<arguments.length&&arguments[1]!==w?arguments[1]:w)||J})});t.on("a:popover:show:ssf-share-popover",function(){b=!0;document.getElementsByClassName("ssf-share-trigger")[0].setAttribute("aria-expanded","true")});t.on("a:popover:hide:ssf-share-popover",function(){b=!1;document.getElementsByClassName("ssf-share-trigger")[0].setAttribute("aria-expanded","false")});
t.on("a:popover:show:ssf-share-modal",function(){b=!0;document.getElementsByClassName("ssf-share-trigger")[0].setAttribute("aria-expanded","true")});t.on("a:popover:hide:ssf-share-modal",function(){b=!1;document.getElementsByClassName("ssf-share-trigger")[0].setAttribute("aria-expanded","false")});t.on("a:sheet:beforeShow:ssf-customize-bottom-sheet",function(y){y.sheet.$container.css("height","")});f()})()}catch(v){d.logCounter("DPX.Desktop.Error"),d.logCounter(q,"Error"),d.logLoad("Error"),d.logFatal("Error loading Share Framework AUI: "+
v.toString())}finally{d.logCounter("DPX.Desktop.Render"),d.logCounter(q,"Render"),d.logLoad("Render"),t.trigger("ssf:event:load"),d.stopTimer(q)}return{init:f}});"use strict";var oa=function(){return function(t,A){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t)){var D=[],u=!0,a=!1,k=w;try{for(var n=t[Symbol.iterator](),d;!(u=(d=n.next()).done)&&(D.push(d.value),!A||D.length!==A);u=!0);}catch(c){a=!0,k=c}finally{try{if(!u&&n["return"])n["return"]()}finally{if(a)throw k;}}return D}throw new TypeError("Invalid attempt to destructure non-iterable instance");
}}();L.when("A","SocialShareWidgetConfig","SocialShareWidget").register("SocialShareWidgetTemplating",function(t,A,D){D=D.SocialShareCore;var u=t.$,a=D.Detection.isClipboardAvailable,k=D.Detection.isDesktop,n=A.excludedChannels;a()||n.push("copy");var d=function(c){return'\x3cspan class\x3d"a-spinner a-spinner-'+c+' a-align-center aok-hidden"\x3e\x3c/span\x3e'};return{build:function(c){var f=c.shareUrl,b=c.socialLinks,q=b===w?{}:b;b=c.shareDataAttributes;var v=c.builtChannels,E=c.kpModalParams,e=
c.t;q.email=c.mailToUri;var g='\x3cspan class\x3d"a-button ssf-copy"\x3e\n        \x3cspan class\x3d"a-button-inner"\x3e\n          \x3cinput class\x3d"a-button-input" type\x3d"button" aria-label\x3d"'+e.taf_copy_tooltip+'"\x3e\n          \x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3e\n            \x3cbutton class\x3d"a-button-text"\x3e\n              \x3cdiv class\x3d"copy-label"\x3e\n                '+e.taf_copy_tooltip+"\n              \x3c/div\x3e\n            \x3c/button\x3e\n          \x3c/span\x3e\n        \x3c/span\x3e\n      \x3c/span\x3e";
!k()&&a()&&1>u(".ssf-feedback").length&&u(document.body).append('\x3cdiv class\x3d"a-changeover ssf-feedback" style\x3d"display:none"\x3e\n          \x3cdiv class\x3d"a-changeover-inner"\x3e\n            \x3ci class\x3d"a-icon a-icon-checkmark-inverse"\x3e\x3c/i\x3e\n            \x3cstrong class\x3d"a-size-medium"\x3e'+e.taf_copy_url_changeover+"\x3c/strong\x3e\n          \x3c/div\x3e\n        \x3c/div\x3e");var h=function(p){return{title:e["taf_"+p.name+"_tooltip"]||p.label,label:e["taf_"+p.name+
"_name"]||p.label}};A.lineMarketplaces.includes(b.marketplaceId)||q.li?n.push("pi"):n.push("li");E||n.push("embed");A.cnMarketplace.includes(b.marketplaceId)&&n.push.apply(n,na(A.nonCNChannels));return{getModal:function(){var p="",l=!0,x=!1,m=w;try{for(var G=Object.entries(v)[Symbol.iterator](),M;!(l=(M=G.next()).done);l=!0){var I=oa(M.value,2),J=I[0],r=I[1];if(!n.includes(J)&&"copy"!==J){var z=h(r),C=q[r.name]||r.getSharingUrl();p+='\x3cli class\x3d"ssf-channel-h"\x3e\n              \x3ca class\x3d"ssf-channel a-color-base" aria-label\x3d"'+
z.label+'" href\x3d"'+C+'" title\x3d"'+z.title+'" data-key\x3d"'+J+'"\x3e\n                '+d("medium")+'\n                \x3ci aria-hidden\x3d"true" style\x3d"background-image: url('+r.image+')"\x3e\x3c/i\x3e\n              \x3c/a\x3e\n              \x3cspan\x3e'+z.label+"\x3c/span\x3e\n            \x3c/li\x3e"}}}catch(O){x=!0,m=O}finally{try{!l&&G.return&&G.return()}finally{if(x)throw m;}}l=a()?'\x3cdiv class\x3d"ssf-copy-section a-box a-padding-base a-spacing-top-large"\x3e\n              \x3cdiv class\x3d"link-section"\x3e'+
f.return+'\x3c/div\x3e\n              \x3cdiv class\x3d"copy-button"\x3e'+g+"\x3c/div\x3e\n          \x3c/div\x3e":"";return'\x3ch3 class\x3d"a-spacing-large"\x3e'+e.taf_share_bottom_sheet_title+'\x3c/h3\x3e\x3cdiv class\x3d"ssf-h-icons"\x3e\x3cul class\x3d"ssf-h-icons a-nostyle"\x3e'+(p+"\x3c/ul\x3e\x3c/div\x3e")+l},getPopover:function(){var p="",l=!0,x=!1,m=w;try{for(var G=Object.entries(v)[Symbol.iterator](),M;!(l=(M=G.next()).done);l=!0){var I=oa(M.value,2),J=I[0],r=I[1];if(!n.includes(J)){var z=
h(r),C=q[r.name]||r.getSharingUrl();p+='\x3cli class\x3d"ssf-channel-v"\x3e\n              \x3ca class\x3d"ssf-channel '+J+' a-color-base" aria-label\x3d"'+z.label+'" href\x3d"'+C+'" title\x3d"'+z.title+'" data-key\x3d"'+J+'"\x3e\n                '+d("small")+'\n                \x3ci aria-hidden\x3d"true" style\x3d"background-image: url('+r.image+')"\x3e\x3c/i\x3e\n                \x3cspan class\x3d"'+J+'-label"\x3e'+z.label+"\x3c/span\x3e\n              \x3c/a\x3e\n            \x3c/li\x3e"}}}catch(O){x=
!0,m=O}finally{try{!l&&G.return&&G.return()}finally{if(x)throw m;}}return'\x3cul class\x3d"a-nostyle"\x3e'+p+"\x3c/ul\x3e"},getBottom:function(){var p="",l=!0,x=!1,m=w;try{for(var G=Object.entries(v)[Symbol.iterator](),M;!(l=(M=G.next()).done);l=!0){var I=oa(M.value,2),J=I[0],r=I[1];if(!n.includes(J)){var z=h(r),C=q[r.name]||r.getSharingUrl();p+='\x3cli class\x3d"ssf-channel-b a-padding-base"\x3e\n              \x3ca class\x3d"ssf-channel '+J+' a-color-base" aria-label\x3d"'+z.label+'" href\x3d"'+
C+'" title\x3d"'+z.title+'" data-key\x3d"'+J+'"\x3e\n                '+d("medium")+'\n                \x3ci aria-hidden\x3d"true" style\x3d"background-image: url('+r.image+')"\x3e\x3c/i\x3e\n                \x3cspan class\x3d"a-size-base-plus"\x3e'+z.label+"\x3c/span\x3e\n              \x3c/a\x3e\n              \x3c/li\x3e"}}}catch(O){x=!0,m=O}finally{try{!l&&G.return&&G.return()}finally{if(x)throw m;}}return'\x3cdiv class\x3d"a-padding-base ssf-header"\x3e\n          \x3ch4\x3e'+e.taf_share_bottom_sheet_title+
'\x3c/h4\x3e\n        \x3c/div\x3e\x3cdiv class\x3d"ssf-scroll"\x3e\x3cul class\x3d"a-nostyle"\x3e'+(p+"\x3c/ul\x3e\x3c/ul\x3e\x3c/div\x3e")},getCustomize:function(){var p=void 0;L.now("SocialShareWidgetCustomizeTemplate").execute(function(I){p=c.customize?I.getCustomizeBox(e):""});var l='\x3ch3 class\x3d"a-spacing-base a-spacing-top-base"\x3e'+e.taf_share_bottom_sheet_title+"\x3c/h3\x3e",x='\x3cdiv class\x3d"ssf-heading-container"\x3e\x3cimg class\x3d"ssf-back-btn" src\x3d"https://m.media-amazon.com/images/G/01/share-icons/arrow-left.svg"\x3e'+
l+"\x3c/div\x3e",m='\x3cdiv class\x3d"a-padding-base a-box ssf-preview-container ssf-no-border" style\x3d"background-image: url('+c.image+')"\x3e'+d("medium")+"\x3c/div\x3e",G=c.caf?'\x3cdiv class\x3d"a-row a-spacing-top-large'+(c.customize?"":" a-spacing-large")+'"\x3e\n          \x3cdiv class\x3d"a-column a-span9"\x3e\n            \x3cstrong class\x3d"ssf-caf-toggle-label"\x3e'+e.taf_custshare_caf_ingress+'\x3c/strong\x3e\n          \x3c/div\x3e\n          \x3cdiv class\x3d"a-column a-span3 a-text-right a-span-last"\x3e\n            \x3cdiv class\x3d"a-switch-row ssf-caf-toggle"\x3e\n          \x3cinput class\x3d"a-declarative a-switch-input" data-action\x3d"a-switch-input" name\x3d"caf" type\x3d"checkbox"\x3e\n          \x3clabel class\x3d"a-switch-label a-declarative" data-action\x3d"a-switch-label"\x3e\n            \x3cdiv class\x3d"a-switch a-declarative" data-action\x3d"a-switch"\x3e\n              \x3ca class\x3d"a-switch-control" aria-label\x3d"caf" style\x3d"transform: translateX(-1px) translateZ(0px);"\x3e\x3c/a\x3e\n            \x3c/div\x3e\n          \x3c/label\x3e\n        \x3c/div\x3e\n          \x3c/div\x3e\n        \x3c/div\x3e':
"",M='\x3cspan class\x3d"a-button a-button-primary a-spacing-top-small ssf-customize-share-btn"\x3e\n          \x3cspan class\x3d"a-button-inner"\x3e\n            \x3cinput class\x3d"a-button-input" type\x3d"button" aria-labelledby\x3d"ssf-customize-share-btn"\x3e\n            \x3cspan class\x3d"a-button-text" aria-hidden\x3d"true" id\x3d"ssf-customize-share-btn"\x3e\n              '+c.shareLabel+"\n              "+d("small")+"\n            \x3c/span\x3e\n          \x3c/span\x3e\n        \x3c/span\x3e";
return'\x3cdiv class\x3d"a-padding-base ssf-customize-container-one"\x3e'+l+m+G+p+M+"\x3c/div\x3e"+(c.customize?'\x3cdiv class\x3d"a-padding-base ssf-customize-container-two aok-hidden"\x3e'+x+m+G+'\x3cdiv class\x3d"a-row a-spacing-top-base a-padding-base ssf-tabs"\x3e\x3c/div\x3e'+M+"\x3c/div\x3e":"")}}}}});"use strict";L.when("jQuery","SocialShareWidget","SocialShareWidgetState","SocialShareWidgetLinkUtil","SocialShareWidgetAPI").register("SocialShareWidgetTiny",function(t,A,D,u,a){A=A.SocialShareCore;
var k=A.Metrics,n=A.Constants;return{fetch:function(d){var c=d.data,f=d.isAsync,b=f===w?!0:f,q=d.callback;try{if(0<c.refMarkerId){var v=new URL(c.url),E=v.searchParams.get("ref_");E&&(E=E+"_"+c.refMarkerId,v.searchParams.set("ref_",E),c.url=v.toString())}var e=D.get("shareData");if(D.get("dpx")){var g=D.get("shareAapiCsrfToken"),h=D.get("aapiBaseUrl");if("C"!==e.skipTwisterAPI){var p=new URL(c.url);p.searchParams.append("skipTwisterOG","T2"===e.skipTwisterAPI?2:1);c.url=p.toString()}if(e.isBestFormatEnabled){var l=
new URL(c.url);l.searchParams.append("bestFormat","true");c.url=l.toString()}if(e.isShortTitleGatingEnabled&&""!==e.titleSource){var x=new URL(c.url);x.searchParams.append("titleSource",e.titleSource);c.url=x.toString()}c.url=u.getLinkWithFlippedStarsLeft(c.url);"dprv"===e.refId&&(c.shareAapiCsrfToken=g,c.aapiBaseUrl=h,c.tinyUrlEnabled=!0,k.logCounter("reviews.tiny"))}var m=B.location.protocol+"//";if(c.isOGTEnabled){var G=new URL(c.url);G.searchParams.append("newOGT","1");c.url=G.toString()}var M=
c.deeplinkInfo;if(M&&M.isDisabled&&M.flag!=w){var I=new URL(c.url);I.searchParams.append("nodl",M.flag);c.url=I.toString()}if(c.isOnShareGatingEnabled)a.build(e).onShare(b,c.url,c.extractedRef,c.osType,q);else if(c.tinyUrlEnabled)if(c.aapiBaseUrl&&c.shareAapiCsrfToken&&c.marketplaceId)(function(){var J=""+m+c.aapiBaseUrl+"/api/marketplaces/"+c.marketplaceId+"/social-share/tinyurl",r={longUrl:c.url},z={"Accept-Language":"en-US",Accept:'application/vnd.com.amazon.api+json; type\x3d"social-share.tinyurl/v1"',
"x-api-csrf-token":c.shareAapiCsrfToken,"Content-Type":"application/x-www-form-urlencoded","x-amzn-encrypted-slate-token":D.get("slateToken")};k.startTimer("Tiny");t.ajax(J,{type:"POST",headers:z,xhrFields:{withCredentials:!0},contentType:"application/x-www-form-urlencoded",async:b,data:r,success:function(C){k.logCounter("Tiny.Response");k.logCounter("Desktop.Tiny.Response");k.logCounterRefactor("Tiny.Response");C.entity&&C.entity.shortUrl?(q(C.entity.shortUrl.url),k.logCounter("Tiny.Success")):(L.log("Error Generating TinyURL. with share url "+
c.url,"ERROR",n.SSF_AUI_PACKAGE_ATTRIBUTION),k.logCounter("Tiny.Error"),q(c.url))},error:function(C){C&&C.status!=w&&0===C.status?k.logCounter("Tiny.Blocked"):(L.log("Error Generating TinyURL with share url "+c.url+", Error Code: "+C.status+", Error Response: "+C.responseText+", Endpoint: "+J,"ERROR",n.SSF_AUI_PACKAGE_ATTRIBUTION),k.logCounter("Tiny.Error"),k.logCounter("Desktop.Tiny.Error"),k.logCounterRefactor("Tiny.Error"));q(c.url)},complete:function(){k.stopTimer("Tiny")}})})();else return k.logCounter("Tiny.Unavailable"),
q(c.url);else return q(c.url)}catch(J){return L.log("Error generating tinyURL: "+J.toString(),"ERROR",n.SSF_AUI_PACKAGE_ATTRIBUTION),c.url}}}});"use strict";L.when("A").register("SocialShareWidgetState",function(t){var A="social-"+B.ue_id+"-share",D={slateToken:t.$('meta[name\x3d"encrypted-slate-token"]').attr("content")||"",dpx:!1};t.state(A,D);return{getCurrent:function(){return t.state(A)},get:function(u){return this.getCurrent()[u]},getAndReset:function(u){var a=this.get(u);a&&this.set(u,null);
return a},set:function(u,a){var k=this.getCurrent();t.trigger("ssf:event:state:set",k);if(!u)return k;k[u]=a;k=t.state(A,k);t.trigger("ssf:event:state:changed",k);return k}}});"use strict";L.when("jQuery","SocialShareWidget","SocialShareWidgetState").register("SocialShareWidgetAPI",function(t,A,D){A=A.SocialShareCore;var u=A.Constants,a=A.Metrics,k=B.location.protocol+"//",n=a.getMetricName(t,u.customize),d=Object.freeze({GET:"GET",POST:"POST",PUT:"PUT"}),c=Object.freeze({generateImage:'application/vnd.com.amazon.api+json; type\x3d"aapi.socialshareapicontracts.custom.ssapis.product.generate.customized.image.response/v1"',
externalizeImage:'application/vnd.com.amazon.api+json; type\x3d"aapi.socialshareapicontracts.custom.ssapis.product.externalize.customized.image.response/v1"',fetchTabs:'application/vnd.com.amazon.api+json; type\x3d"aapi.socialshareapicontracts.custom.ssapis.product.shareable.attributes.response/v1"',getWeblabTreatmentAndTrigger:'application/vnd.com.amazon.api+json; type\x3d"aapi.socialshareapicontracts.weblab.treatment-and-trigger.response/v1"',onShare:'application/vnd.com.amazon.api+json; type\x3d"aapi.socialshareapicontracts.social-share.on-share.response/v1"',
fetchCAFID:'application/vnd.com.amazon.api+json; type\x3d"aapi.consultafriendcontracts.custom.consult-a-friend.feedback-request.response/v1"',fetchHmpPollId:'application/vnd.com.amazon.api+json; type\x3d"aapi.consultafriendcontracts.custom.helpmepick.create-poll.response/v1"',getShortTitle:'application/vnd.com.amazon.api+json; type\x3d"aapi.socialshareapicontracts.social-share.get-short-title.response/v1"'}),f=function(b){return(b=b.entity)&&"SUCCEEDED"===b.status?b.tabs.map(function(q){var v={id:q.id,
heading:q.shortDisplayName,text:q.longDisplayName,isQuote:!0};q.params&&(v.values=Object.values(q.params)[0],v.isQuote=!1);return v}):[]};return{build:function(b){var q=b.shareAapiCsrfToken,v=b.locale,E=b.cafAapiCsrfToken,e=b.productType,g=b.shareDataAttributes,h=g.marketplaceId,p=g.asin,l=g.ingress,x=k+b.aapiBaseUrl,m=D.get("slateToken");m||a.logCounter("slate.missing");var G=function(I){return x+"/custom/socialshareapicontracts/marketplaces/"+h+"/products/"+p+"/shareframework/"+I},M=function(I){var J=
I.async;t.ajax({url:I.url,type:I.type,async:J===w?!0:J,data:I.data,headers:{"Accept-Language":v,Accept:I.accept,"x-api-csrf-token":I.cafToken||q,"Content-Type":"application/x-www-form-urlencoded","x-amzn-encrypted-slate-token":m},xhrFields:{withCredentials:!0},success:I.success,error:I.error,complete:I.complete})};return{generateImage:function(I,J){var r=G("generatecustomizedimage");a.startTimer("GenerateCustomizeImage");M({url:r,type:d.POST,data:I,accept:c.generateImage,success:function(z){"SUCCEEDED"===
z.entity.status?(a.logCounter("GenerateCustomizeImage.Success"),a.logCounter(n,"generateCustomizeImageSuccess"),a.logCounterRefactor("generateCustomizeImageSuccess",l)):(a.logCounter("GenerateCustomizeImage.Fail"),a.logCounter(n,"generateCustomizeImageFail"),a.logCounterRefactor("generateCustomizeImageFail",l));J(z)},error:function(z){a.logCounter("GenerateCustomizeImage.Error");a.logCounter(n,"generateCustomizeImageError");a.logCounterRefactor("generateCustomizeImageError",l);a.logCounter("generateCustomizeImageError");
L.log("Error generating customize image. with request URL "+r+", Error Code: "+z.status+". Error Response: "+z.responseText,"ERROR",u.SSF_AUI_PACKAGE_ATTRIBUTION);J(z)},complete:function(){a.stopTimer("GenerateCustomizeImage")}})},externalizeImage:function(I,J,r){var z=G("externalizecustomizedimage?customizedImageUrl\x3d"+I);a.startTimer("ExternalizeImage");M({url:z,type:d.PUT,accept:c.externalizeImage,async:r,success:function(C){J(C)},error:function(C){a.logCounter(n,"externalizeImageFail");a.logCounterRefactor("externalizeImageFail",
l);a.logCounter("externalizeImageFail");L.log("Error externalizing image. with request URL "+z+", Error Code: "+C.status+". Error Response: "+C.responseText,"ERROR",u.SSF_AUI_PACKAGE_ATTRIBUTION);J({})},complete:function(){a.stopTimer("ExternalizeImage")}})},fetchTabs:function(I){var J=G("productshareableattributes?locale\x3d"+v+"\x26type\x3d"+e);a.startTimer("FetchTabs");M({url:J,type:d.GET,accept:c.fetchTabs,success:function(r){a.logCounter(n,"FetchTabsSuccess");a.logCounterRefactor("FetchTabsSuccess",
l);I(f(r))},error:function(r){a.logCounter(n,"FetchTabsFail");a.logCounterRefactor("FetchTabsFail",l);a.logCounter("FetchTabsFail");L.log("Error Fetching customize share tabs. with request URL "+J+", Error Code: "+r.status+". Error Response: "+r.responseText,"ERROR",u.SSF_AUI_PACKAGE_ATTRIBUTION);I([])},complete:function(){a.stopTimer("FetchTabs")}})},fetchCAFID:function(I){var J=1<arguments.length&&arguments[1]!==w?arguments[1]:!0,r=x+"/custom/consultafriendcontracts/marketplaces/"+h+"/consultafriend/feedback-request/"+
p;a.logCounter(n,"CAF.createCAFID.called");a.logCounterRefactor("CAF.createCAFID.called",l);a.startTimer("CafIdGeneration");M({url:r,type:d.POST,accept:c.fetchCAFID,async:J,cafToken:E,success:function(z){I(z.entity&&z.entity.cafId,p,b.url)},error:function(z){a.logCounter(n,"CAF.createCAFID.failed");a.logCounterRefactor("CAF.createCAFID.failed",l);L.log("Error Creating CAF Id. with request URL "+r+", Error Code: "+z.status+". Error Response: "+z.responseText,"ERROR",u.SSF_AUI_PACKAGE_ATTRIBUTION);
I()},complete:function(){a.stopTimer("CafIdGeneration")}})},fetchHmpPollId:function(I){var J=1<arguments.length&&arguments[1]!==w?arguments[1]:!0,r=b.hmpAapiCsrfToken,z=t.param(b.hmpState,!0),C=x+"/custom/consultafriendcontracts/marketplaces/"+h+"/helpmepick/poll?"+z;a.logCounter("HMP.fetchHmpPollId.called."+l);a.startTimer("HmpIdGeneration");M({url:C,type:d.POST,accept:c.fetchHmpPollId,async:J,cafToken:r,success:function(O){I(O.entity&&O.entity.cafId)},error:function(O){a.logCounter("HMP.fetchHmpPollId.failed."+
l);L.log("Error Fetching Poll Id. with request URL "+C+", Error Code: "+O.status+". Error Response: "+O.responseText,"ERROR",u.SSF_AUI_PACKAGE_ATTRIBUTION);I()},complete:function(){a.stopTimer("HmpIdGeneration")}})},getWeblabTreatmentAndTrigger:function(I,J,r){var z=x+"/custom/socialshareapicontracts/marketplaces/"+h+"/weblab/get-weblab-treatment-and-record?name\x3d"+J;a.startTimer("GetWeblabTreatmentAndTriggerMetric");M({url:z,type:d.GET,accept:c.getWeblabTreatmentAndTrigger,async:I,success:function(C){a.logCounter("GetWeblabTreatmentAndRecordSuccess");
r(C)},error:function(C){a.logCounter("GetWeblabTreatmentAndRecordFail");L.log("Error calling weblab treatment and trigger. with request URL "+z+", Error Code: "+C.status+". Error Response: "+C.responseText,"ERROR",u.SSF_AUI_PACKAGE_ATTRIBUTION);r([])},complete:function(){a.stopTimer("GetWeblabTreatmentAndTriggerMetric")}})},onShare:function(I,J,r,z,C){var O=x+"/custom/socialshareapicontracts/marketplaces/"+h+"/products/"+p+"/shareframework/onshare";a.startTimer("onShare");M({url:O,type:d.POST,accept:c.onShare,
async:I,data:{longUrl:J,channel:r,osType:z},success:function(U){"SUCCEEDED"===U.entity.status?(C(U.entity.shortUrl.url),a.logCounter("OnShare.Success")):(L.log("The request was sent successfully, but the response status indicates a failure with request URL "+J,"ERROR",u.SSF_AUI_PACKAGE_ATTRIBUTION),a.logCounter("OnShare.Failure"),C(J))},error:function(U){a.logCounter("OnShare.Error");L.log("Error calling on share. with request URL "+J,"ERROR",u.SSF_AUI_PACKAGE_ATTRIBUTION);C([])},complete:function(){a.stopTimer("onShare")}})},
getShortTitle:function(I,J){var r=x+"/custom/socialshareapicontracts/marketplaces/"+h+"/products/"+p+"/shareframework/getshorttitle",z=I?"Async":"Sync";a.startTimer("GetShortTitle-"+z);M({url:r,type:d.GET,accept:c.getShortTitle,async:I,success:function(C){"SUCCEEDED"===C.entity.status?(a.logCounter("GetShortTitle.Success"),J(C.entity)):(L.log("The request was sent successfully, but the response status indicates a failure","ERROR",u.SSF_AUI_PACKAGE_ATTRIBUTION),a.logCounter("GetShortTitle.Failure"),
J([]))},error:function(C){a.logCounter("GetShortTitle.Error");L.log("Error calling get short title. with request URL "+r+", Error Code: "+C.status+". Error Response: "+C.responseText,"ERROR",u.SSF_AUI_PACKAGE_ATTRIBUTION);J([])},complete:function(){a.stopTimer("GetShortTitle-"+z)}})}}}}});"use strict";L.when("A","SocialShareWidget","SocialShareWidgetAPI").register("SocialShareWidgetCustomShareOptionsTemplate",function(t,A,D){function u(h,p,l,x){D.build(h).getWeblabTreatmentAndTrigger(p,l,function(m){x(m.entity)})}
function a(h){return new Promise(function(p){u(h,!1,"TMT_SOCIAL_SHARE_ANDROID_COPY_LINK_1061126",function(l){p(l&&"SUCCEEDED"===l.status&&"T1"===l.treatment)})})}var k=t.capabilities.rtl;A=A.SocialShareCore.Detection;var n=A.isClipboardAvailable,d=A.isAndroid(),c=void 0,f=t.constants.HIDE_CLASS;L.when("mash").execute(function(h){return c=h});var b=function(){c||L.now("mash").execute(function(h){return c=h});return c},q=function(h,p){if(!b()||0===h.length)return p([]);var l=h.length,x=[];h.forEach(function(m){v(m,
function(G,M){l--;M&&(x[G.label.toLowerCase()]=G);(3<=x.length||0>=l)&&p(x)})})},v=function(h,p){var l="whatsapp"===h.label.toLowerCase()&&d;b().canLaunchIntentURL({url:h.schemeURI,successCallback:function(x){if(l)return p(h,!0);p(h,x)},failCallback:function(){if(l)return p(h,!0);p(h,!1)}})},E=function(h,p){var l=p.stringId,x=p.className,m=p.label;p="https://m.media-amazon.com/images/G/01/share-icons/"+p.image;return'\x3cli class\x3d"ssf-custom-share-option '+(x===w?"":x)+'"  data-name\x3d"'+m.toLowerCase()+
'"\x3e\n                    \x3cdiv class\x3d"ssf-custom-share-spinner" role\x3d"button"\x3e\n                        \x3cspan class\x3d"a-spinner a-spinner-medium a-align-center '+(f+'"\x3e\x3c/span\x3e\n                        \x3cimg src\x3d"')+p+'" title\x3d"'+m+'" aria-label\x3d"'+m+'"/\x3e\n                    \x3c/div\x3e\n                    \x3cspan class\x3d"label a-size-small"\x3e'+(h.t[l]||m)+"\x3c/span\x3e\n                 \x3c/li\x3e"},e=function(h){var p=1<arguments.length&&arguments[1]!==
w?arguments[1]:"";h=h.startsWith("http")?h:"https://m.media-amazon.com/images/G/01/share-icons/"+h;return'\x3cimg class\x3d"'+p+'" src\x3d"'+h+'" /\x3e'},g=function(){return'\x3cspan class\x3d"a-size-mini ssf-rating-count"\x3e'+(0<arguments.length&&arguments[0]!==w?arguments[0]:"")+"\x3c/span\x3e"};return{getChannelsHtml:function(h,p){var l="";q(h.customShareOptions,function(x){var m=t.extend(x,h.defaultCustomShareOptions);h.customShareBuiltChannels=m;var G=Object.keys(m),M=[],I="",J="";if(0===G.length)throw Error("Fallback to Native Sheet: channel key list is empty.");
x=function(z){var C=G[z];d&&"copy"===C&&navigator&&n()?h.isUnsignedShareSheetCopyLinkOverrideEnabled?I=E(h,m[C]):h.isAndroidCopyLinkGatingEnabled&&M.push(a(h).then(function(O){O&&(I=E(h,m[C]))})):"more"===C?b()&&(J=E(h,m[C])):l+=E(h,m[C])};for(var r=0;r<G.length;r++)x(r);Promise.all(M).then(function(){I&&(l+=I);J&&(l+=J);p('\n                    \x3cdiv class\x3d"ssf-custom-channels-container a-color-base-background"\x3e\n                        \x3cul class\x3d"ssf-custom-share-options-container a-unordered-list a-nostyle"\x3e\n                            '+
l+"\n                        \x3c/ul\x3e\n                    \x3c/div\x3e\n                ")})})},getPreviewImage:function(h){var p=h.starRating,l=h.numberOfReviews,x=k?"r":"";h='\x3cdiv class\x3d"ssf-cso-p-image ssf-regular"\x3e'+e(h.productImage,"ssf-regular")+"\x3c/div\x3e";p=p?e("RIO"+p+x+".png","ssf-caf-stars"):"";l=g(l);return'\x3cdiv class\x3d"ssf-cso-p-image"\x3e'+h+('\x3cdiv class\x3d"ssf-cso-stickers ssf-regular"\x3e'+p+l+"\x3c/div\x3e\x3c/div\x3e")},getErrorAlert:function(h){return'\x3cdiv class\x3d"ssf-error-text a-row '+
f+'"\x3e\n          \x3cdiv class\x3d"a-box a-alert-inline a-alert-inline-error" role\x3d"alert"\x3e\n              \x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\n                  \x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e\n                  \x3cdiv class\x3d"a-alert-content"\x3e\n                    \x3cspan class\x3d"ssf-error-generic '+f+'"\x3e'+h.taf_custshare_channel_error_generic+'\x3c/span\x3e\n                    \x3cspan class\x3d"ssf-error-email '+f+'"\x3e'+h.taf_custshare_channel_error_email+
"\x3c/span\x3e\n                  \x3c/div\x3e\n              \x3c/div\x3e\n          \x3c/div\x3e\n        \x3c/div\x3e"},getAvailableChannels:q}});"use strict";L.when("A","SocialShareWidget","SocialShareWidgetAPI","SocialShareWidgetState").register("SocialShareWidgetCustomShareOptions",function(t,A,D,u){var a=t.$;A=A.SocialShareCore;var k=A.ShareSheet,n=A.Metrics,d=A.Constants,c=void 0,f=void 0,b=void 0,q=void 0,v=!1,E=t.constants.HIDE_CLASS;L.when("mash").execute(function(e){f=e});L.when("SocialShareWidgetTiny").execute(function(e){c=
e});L.when("SocialShareWidgetCustomizeUtils").execute(function(e){b=e});L.when("SocialShareWidgetCAFUtils").execute(function(e){q=e});return{init:function(e,g,h,p,l,x){var m=e.customShareBuiltChannels;g=e.isCustomShareOptionsSheetEnabled;var G=g===w?!1:g;g=e.isFallbackShareUrlEnabled;var M=g===w?!1:g;g=e.caf;var I=g===w?!1:g,J=e.shareDataAttributes;g=e.treatment;var r=g===w?"":g;g=e.weblab;var z=g===w?"":g;g=e.refererURL;var C=g===w?"":g,O="C";e.cafIngressId===d.CAF_INFO_ICON_KEY?O="T1":e.cafIngressId===
d.CAF_LEARN_MORE_KEY&&(O="T2");t.on("ssf:event:caf-switch-change",function(K){v=K});var U=function(K){K.addClass("ssf-noclick");K.find(".a-spinner").removeClass(E)},Q=function(K){K.removeClass("ssf-noclick");K.find(".a-spinner").addClass(E)},W=function(){return v?(e.t["taf-share-caf-messageprefix"]||"")+" "+e.title:e.title},X=function(K,R,S){v?q.prepareShareUrl(e,K,c,R,function(F,y){return S(F,y)}):e&&e.isHmpShareSheet?q.prepareHmpShareUrl(e,K,c,R,function(F,y){return S(F,y)}):b.prepareShareUrl(e,
K,c,R,function(F){return S(F)})},ca=function(K){K&&t.trigger("ssf:event:caf-share-complete-success",e)},aa=function(){f.dispatchEvent({type:"axf:consultAFriend:shareCompletedSuccessfully",detail:{isHmp:!0}})},Y=function(K,R,S,F){try{var y=encodeURIComponent(F+" \n "+S);return"Messages"===R?t.capabilities.ios?"sms:///\x26body\x3d"+y:"mms:?\x26body\x3d"+y:"Email"===R?K=K.replace("\x26url\x3d{url}","").replace("{subject}",encodeURIComponent(e.emailSubject)).replace("{body}",""+y):"whatsApp"===R?K=K.replace("{url}",
""+y):K=K.replace("{text}",encodeURIComponent(F)).replace("{url}",encodeURIComponent(S)).replace("{titleAndURL}",encodeURIComponent(y))}catch(H){return L.log("Failed to generate shareUrl, error: "+H.toString(),"ERROR",d.SSF_AUI_PACKAGE_ATTRIBUTION),K}},ja=function(K){if(v){n.logCounter("Caf.customShareOptions.ChannelClick."+K);var R="C";e.cafIngressId===d.CAF_INFO_ICON_KEY?R="T1":e.cafIngressId===d.CAF_LEARN_MORE_KEY&&(R="T2");n.logCounter("CAF.edIngress.ChannelClick."+K+"."+R)}else b.imageState.isEmpty()?
n.logCounter("CustomShareOptions.ChannelClick."+K):n.logCounter("Books.customShareOptions.ChannelClick."+K)},ka=function(){var K=0<arguments.length&&arguments[0]!==w?arguments[0]:"";K=0<K.length?"."+K:"";return v?""+d.CAF_CUSTOM_SHEET_CLICK_LATENCY_METRIC+K:b.imageState.isEmpty()?""+d.CUSTOM_SHEET_CLICK_LATENCY_METRIC+K:""+d.BOOKS_CUSTOM_SHEET_CLICK_LATENCY_METRIC+K},fa=function(){var K=ka();n.startTimer(K);X(d.EMPTY_STRING,!0,function(R){var S=1<arguments.length&&arguments[1]!==w?arguments[1]:"";
e.tinyUrl=R;var F=e;S&&(F=t.extend({channelSelectCB:function(){ca(S)},cafSwitchEnabled:v},e),F.title=W());e&&e.isHmpShareSheet&&(F=t.extend({channelSelectCB:function(){aa()}},e),F.title=W());(new k(F)).launch(function(){n.logCounter("customShareOptions.SheetOpen")});n.stopTimer(K)})},N=function(K,R){var S=u.getAndReset(d.customizeShareStateKey);return{channel:K,refMarker:R,refererURL:C,shareDataAttributes:J,treatment:r,weblab:z,isCustomShareOptionsSheetEnabled:G,caf:I,cafSwitchEnabled:v,customizeShareCSAData:S,
cafEdCXIngressWeblabTreatment:O}};a(".custom-share-native-sheet").unbind("click").click(function(K){try{ja("more"),h(),fa()}catch(R){L.log('Failed to launch native share sheet via "More" button, error: '+R.toString(),"ERROR",d.SSF_AUI_PACKAGE_ATTRIBUTION)}});a(".custom-share-copy").unbind("click").click(function(K){var R=this;try{(function(){var S=ka();n.startTimer(S);ja("copy");var F=d.CUSTOM_SHARE_OPTIONS_CP_CHANNEL_REF,y=a(R);U(y);X(F,!1,function(H){var P=1<arguments.length&&arguments[1]!==w?arguments[1]:
"";navigator.clipboard.writeText(H).then(function(){var T=e.shareUrl.refMarker.getClickForChannel(F);n.logCSAEvent(d.CSA_HIT_TYPE.SHARE,N("copy",T));v?n.logCounter("Caf.CustomShareOptions.CopySuccess"):b.imageState.isEmpty()?n.logCounter("customShareOptions.CopySuccess"):n.logCounter("Books.CustomShareOptions.CopySuccess");a(".ssf-feedback").show();Q(y);h();n.stopTimer(S);P&&ca(P);e&&e.isHmpShareSheet&&aa()},function(){n.stopTimer(S);v?n.logCounter("Caf.CustomShareOptions.CopyFail"):b.imageState.isEmpty()?
n.logCounter("CustomShareOptions.CopyFail"):n.logCounter("Books.CustomShareOptions.CopyFail");x({shareData:e,channelRef:F,caf:I,cafSwitchEnabled:v});Q(y)})})})()}catch(S){L.log("Failed to share using copy channel, error: "+S.toString(),"ERROR",d.SSF_AUI_PACKAGE_ATTRIBUTION)}});a(".ssf-custom-share-option:not(.custom-share-copy,.custom-share-native-sheet)").unbind("click");a(".ssf-custom-share-option:not(.custom-share-copy,.custom-share-native-sheet)").click(function(K){var R=this;try{(function(){var S=
a(R),F=S.data("name"),y=ka(),H=ka(F);n.startTimer(y);n.startTimer(H);var P=m[F],T=d.CUSTOM_SHARE_OPTIONS_REF_PREFIX+"_"+P.ref,V=e.shareUrl.refMarker.getClickForChannel(T);a(".ssf-error-text").addClass(E);U(S);X(T,!0,function(Z){var da=1<arguments.length&&arguments[1]!==w?arguments[1]:"",ba=Y(P.shareUrl,P.label,Z,W());f?f.launchIntentURL({url:ba,successCallback:function(){n.stopTimer(y);n.stopTimer(H);Q(S);h();n.logCounterRefactor("ChannelClick",J.ingress);n.logCounter("ChannelClick");ja(F);da&&ca(da);
e&&e.isHmpShareSheet&&aa();n.logCSAEvent(d.CSA_HIT_TYPE.SHARE,N(F,V))},failCallback:function(ea){L.log("Failed to launch intent URL "+ba+" with error code: "+ea.code,"WARN",d.SSF_AUI_PACKAGE_ATTRIBUTION);n.logCounter("customShareOptions.LaunchShareIntentFail");Q(S);n.stopTimer(y);n.stopTimer(H);M&&P.fallbackShareUrl?(n.logCSAEvent(d.CSA_HIT_TYPE.SHARE,N(F,V)),B.location=Y(P.fallbackShareUrl,P.label,Z,W())):(h(),fa())}}):(Q(S),n.logCSAEvent(d.CSA_HIT_TYPE.SHARE,N(F,V)),h(),B.open(ba,"_blank"))})})()}catch(S){L.log("Failed to share, error: "+
S.toString(),"ERROR",d.SSF_AUI_PACKAGE_ATTRIBUTION)}})}}});"use strict";L.when("A","SocialShareWidgetState","atf").execute(function(t,A){var D=t.$("#ssf-primary-widget-desktop");t=t.$("#ssf-share-action");D=D.data("ssfShareIcon")||t.data("ssfShareIcon")||{};A.set("shareAapiCsrfToken",D.shareAapiCsrfToken);A.set("aapiBaseUrl",D.aapiBaseUrl);A.set("dpx",!0)});"use strict";L.when("A","SocialShareWidget").execute(function(t,A){var D=void 0,u=A.SocialShareCore.Metrics;A=t.debounce(function(){clearTimeout(D)},
200,!0);t.declarative("ssf-share-icon","touchstart",function(){D=setTimeout(function(){u.logCounter("longpress")},500)});t.declarative("ssf-share-icon","touchmove touchend",A)});"use strict";L.when("A","SocialShareWidget").register("SocialShareWidgetMetrics",function(t,A){var D=A.SocialShareCore.Metrics,u=function(k){k=k.pathname.split("/").filter(function(n){return t.contains(n,"ref\x3d")});return(k.length?k[0]:"").replace("ref\x3d","")},a=function(k){return(k=k.match(/cm_sw_r_(?:cso_)?(.*?)_/))?
k[1]:w};L.now("SocialShareWidgetLoadedBTF").execute(function(k){k?D.logCounter("btf:render"):D.logCounter("atf:render")});L.when("atf").execute(function(){try{var k=t.capabilities,n=k.tablet;k.isIE&&D.logCounter("render.ie");(n||600<screen.width&&k.isAmazonApp)&&D.logCounter("render.tablet");var d=new URL(location.href);if(d.href.includes("cm_sw_r_")){var c=d.searchParams.get("ref")||d.searchParams.get("ref_");c||(c=u(d));if(c.startsWith("cm_sw_r_")){var f=a(c);f&&D.logCounter("return.visit."+f);
D.logCounter("return.visit")}}d.searchParams.get("cafId")&&D.logCounter("CAF.cafDeepLink")}catch(b){D.logCounter("urlparam.issue")}});return{getRefEq:u,getChannelFromRef:a}});"use strict";L.register("SocialShareWidgetLinkUtil",function(){return{getLinkWithFlippedStarsLeft:function(t){try{var A=new URL(t.href||t),D=A.searchParams;if(D.get("ref_")&&D.get("starsLeft")){var u=D.get("ref_"),a=D.get("starsLeft"),k=D.get("newPreview"),n=D.get("skipTwisterOG"),d=D.get("bestFormat"),c=D.get("language"),f=
D.get("titleSource");D.delete("ref_");D.delete("starsLeft");D.delete("newPreview");D.delete("skipTwisterOG");D.delete("bestFormat");D.delete("language");D.delete("titleSource");A.searchParams.append("ref_",u);A.searchParams.append("starsLeft",a);k&&A.searchParams.append("newPreview",k);n&&A.searchParams.append("skipTwisterOG",n);d&&A.searchParams.append("bestFormat",d);c&&A.searchParams.append("language",c);f&&A.searchParams.append("titleSource",f)}return A.toString()}catch(b){return t.toString()}}}});
"use strict";L.when("A","SocialShareWidget","SocialShareWidgetAPI","SocialShareWidgetCustomizeUtils").register("SocialShareWidgetCustomize",function(t,A,D,u){A=A.SocialShareCore;var a=t.$,k=A.ShareSheet,n=A.Url,d=A.Metrics,c=A.Constants,f=d.getMetricName(a,c.customize),b=t.constants.HIDE_CLASS,q=function(){},v,E=0,e=void 0,g=void 0,h=void 0,p=!1;L.when("a-checkbox").execute(function(l){return g=l});L.when("a-button").execute(function(l){return e=l});try{(function(){var l=u.imageState;t.declarative("cafCheckboxAction",
"change",function(){h()});t.on(u.getEventName("Hide"),function(r){r.sheet.getContentContainer().remove();l.clear()});t.on("a:sheet:afterShow:ssf-customize-bottom-sheet",function(r){J(r.sheet)});var x=function(r,z,C){var O=a(".ssf-preview-container"),U=a(".ssf-caf-preview"),Q=(v=z)?"CAF.switchOn":"CAF.switchOff";d.logCounter(f,Q);d.logCounterRefactor(Q,C);t.trigger("ssf:event:caf-switch-change",z);l.isConsultAFriendPreview=z;C=u.getImageData(r,l);p?u.getBackendPreviewImage(r,C,function(W){W?M(W):t.trigger("ssf:event:preview-generation-failed",
r)}):z?(U.fadeIn(100),O.hide()):(O.fadeIn(100),U.hide())},m=function(r){var z=r.shareData,C=r.channelRef,O=z.shareUrl;r=z.isOGTEnabled;r=r===w?!1:r;var U=z.aapiBaseUrl;U=U===w?"":U;var Q=z.shareAapiCsrfToken;Q=Q===w?"":Q;var W=z.tinyUrlEnabled;W=W===w?!1:W;var X=z.deeplinkInfo;X=X===w?{}:X;var ca=z.shareDataAttributes,aa=z.storeId;aa=aa===w?"":aa;O.refMarker.isBestFormatEnabled=z.isBestFormatEnabled;C=C?O.getReturnForChannel(C):O.return;O=ca.marketplaceId;return{tinyUrlEnabled:W,aapiBaseUrl:U,shareAapiCsrfToken:Q,
marketplaceId:O===w?"":O,url:C,isOGTEnabled:r,originalUrl:z.url||C,refMarkerId:E++,deeplinkInfo:X,storeId:aa}},G=function(r,z,C,O,U,Q,W){var X=C.shareDataAttributes,ca=C.url,aa=X.asin,Y=X.ingress;X=C.refId;a(".ssf-customize-share-btn").find(".a-spinner").addClass(b);e(".ssf-customize-share-btn").enable();z();var ja=!1;z=new URL(Q===w?ca:Q);O&&(X=c.CAF_REF_PREFIX+"_"+X,z.searchParams.append("cafId",O),z.searchParams.append("cafASIN",U),U!==aa&&d.logCounter(f,"CAF.ShareASINMismatch"),ja=!0);z.searchParams.append("language",
B.languageOfPreference||C.locale||"en_US");C.shareUrl=new n(z.toString(),X);var ka=m({shareData:C});L.when("SocialShareWidgetTiny").execute(function(fa){fa.fetch({data:ka,callback:function(N){C.tinyUrl=N;W&&W();N=t.extend({channelSelectCB:function(){O&&t.trigger("ssf:event:caf-share-complete-success",C)},cafSwitchEnabled:ja},C);(new k(N)).launch(function(){t.delay(function(K){r(C)},100);O?(d.logCounter(f,"CAF.ShareSheetOpen"),d.logCounterRefactor("CAF.ShareSheetOpen",Y)):(d.logCounter(f,"ShareSheetOpen"),
d.logCounterRefactor("ShareSheetOpen",Y))})}})})},M=function(r){if(!(1<arguments.length&&arguments[1]!==w&&arguments[1])){var z=new Image;z.src=r;z.onload=function(){l.productImageProperties.width=this.width;l.productImageProperties.height=this.height}}},I=function(r){r=r.popularHighlightStrings;var z=[];z.push({id:"BackgroundImageTab",physicalId:"417kcYISTOL.jpg",url:"https://m.media-amazon.com/images/I/417kcYISTOL.jpg"});r.length&&(defaultQuote=r[0].replace(/"|”|“/g,""),z.push({id:"BookQuotesTab",
value:defaultQuote}));return z},J=function(r){var z=r.$contentContainer,C=parseInt(r.$container.css("max-height"));z=parseInt(z.height());C<z?(r.$contentContainer.css("height",C),d.logCounter("SmallDevice")):r.$contentContainer.css("height","auto")};q=function(r,z,C,O){var U=r.shareDataAttributes,Q=r.treatment,W=Q===w?"":Q;Q=r.weblab;var X=Q===w?"":Q;Q=r.caf;Q=Q===w?!1:Q;var ca=r.isCafPreviewGenerationMigrationEnabled,aa=U.ingress;l.currentPreview=u.getRegularImage();v=r.cafSwitch;Q&&ca&&(p=!0);Q=
function(N,K){0<K.length&&K.forEach(function(R){l.set(R)})};var Y=function(N){d.logCounter(f,N);d.logCounterRefactor(N,aa);d.logCounter(N)},ja=function(N,K){D.build(N).fetchTabs(function(R){L.now("SocialShareWidgetCustomizeTemplate").execute(function(S){a(".ssf-tabs").html(S.getTabs(N,R));K(R)})})};h=function(){var N=g(".ssf-caf-toggle");x(r,N.isChecked(),aa)};r.customize&&r.customizePreSelected?(ca=I(r),l.defaultCustomizationOptions=ca,Q(r,ca),Q=u.getImageData(r,l),u.getBackendPreviewImage(r,Q,function(N){l.currentImage=
N;M(N);u.adjustPreviewHeight();J(O)})):p?(Q=u.getImageData(r,l),u.getBackendPreviewImage(r,Q,function(N){N?M(N):t.trigger("ssf:event:preview-generation-failed",r)})):x(r,v,aa);a(".ssf-customize-share-btn").click(function(){e(".ssf-customize-share-btn").isEnabled()&&(a(".ssf-customize-share-btn").find(".a-spinner").removeClass(b),e(".ssf-customize-share-btn").disable(),v?(Y("CAF.shareClick"),d.startTimer("CAF.fetchCAFAndTinyURL"),r.title=(r.t["taf-share-caf-messageprefix"]||"")+" "+r.title,D.build(r).fetchCAFID(function(N,
K,R){G(z,C,r,N,K,R,function(){d.stopTimer("CAF.fetchCAFAndTinyURL")})})):(Y("shareClick"),d.logCSAEvent(c.CSA_HIT_TYPE.CUSTOMIZE_SHARE,{channel:c.EMPTY_STRING,refMarker:r.shareUrl.refMarker.click,shareDataAttributes:U,treatment:W,weblab:X}),G(z,C,r)))});a(".ssf-caf-toggle-ed-ingress").click(function(){var N="C";r.cafIngressId===c.CAF_INFO_ICON_KEY?N="T1":r.cafIngressId===c.CAF_LEARN_MORE_KEY&&(N="T2");Y("CAF.edIngressTapped"+N);u.transitionToCAFEducationPage();J(O)});a(".ssf-customize-icon").click(function(){e(this).isEnabled()&&
(Y("CustomizeButtonClick"),e(this).disable(),l.currentPreview=u.getCustomizeImage(),ja(r,function(N){N.forEach(function(K){var R="input[type\x3dradio][name\x3d"+K.id+"]";a(R).change(function(S){S=JSON.parse(S.target.value);ka(S);a(R).unbind("click");a(this).one("click",function(F){F=F.target;F.checked=!1;F=JSON.parse(F.value);fa(F)})})});r.customizePreSelected&&(a("#BackgroundImageTab1").trigger("click"),a("#BookQuotesTab0").trigger("click"));N=u.getImageData(r,l);u.getBackendPreviewImage(r,N,function(K){l.currentImage=
K;u.transitionToCustomizePage();u.adjustCustomizedPreviewHeight();J(O);M(K)})}))});a(".ssf-customize-edit-poll-btn").click(function(){e(this).isEnabled()&&(e(this).disable(),t.trigger("ssf-edit-your-poll-trigger",r.hmpState),Y("HMP.EditYourPoll.Clicked"),C())});var ka=function(N){u.setImage();Array.isArray(N)?N.forEach(function(R){l.set(R)}):l.set(N);var K=u.getImageData(r,l);Y(N.id+"Select");u.getBackendPreviewImage(r,K,function(R){l.currentImage=R;M(R)})},fa=function(N){u.setImage();Y(N.id+"Unselect");
l.unset(N);N=u.getImageData(r,l);u.getBackendPreviewImage(r,N,function(K){l.currentImage=K;M(K)})};a(".ssf-back-btn").click(function(){u.isCAFEducationPageVisible()&&(r.cafIngressId===c.CAF_INFO_ICON_KEY?Y("CAF.edBackTappedT1"):r.cafIngressId===c.CAF_LEARN_MORE_KEY?Y("CAF.edBackTappedT2"):Y("CAF.edBackTappedC"));l.currentPreview=u.getRegularImage();d.logCounter("BackButtonClick");u.resetPreviewState(l);u.transitionToDefaultPage();J(O)});L.when("a-checkbox").execute(function(N){a(".ssf-caf-toggle-label").click(function(){var K=
N(".ssf-caf-toggle");K.check(!K.isChecked())})});t.on("ssf:event:preview-generation-failed",function(N){p=!1;a(".ssf-backend-preview").addClass(b);a(".ssf-html-preview").removeClass(b);x(N,v,aa)})}})()}catch(l){d.logCounter(f,"Error"),d.logLoad("Error"),d.logFatal("Error loading Customize widget, Share Framework AUI: "+l.toString())}finally{d.logCounter(f,"Render"),d.logLoad("Render")}return{init:q}});"use strict";L.when("A","SocialShareWidget").register("SocialShareWidgetCustomizeTemplate",function(t,
A){A=A.SocialShareCore;var D=t.capabilities.rtl,u=A.Constants,a=A.ToolBelt,k=function(e){var g=1<arguments.length&&arguments[1]!==w?arguments[1]:"";e=e.startsWith("http")?e:"https://m.media-amazon.com/images/G/01/share-icons/"+e;return'\x3cimg class\x3d"'+g+'" src\x3d"'+e+'"/\x3e'},n=function(e){var g=1<arguments.length&&arguments[1]!==w?arguments[1]:"ssf-product-title-text";t.on("a:sheet:afterShow:ssf-customize-bottom-sheet",function(){t.$(".ssf-title-label").text(e.title)});return'\x3cdiv class\x3d"a-color-secondary a-padding-small '+
g+'"\x3e\n      \x3cspan class\x3d"ssf-title-label" id\x3d"ssf-title-label"\x3e\n        \x3c!-- TITLE  --\x3e\n      \x3c/span\x3e\n    \x3c/div\x3e'},d=function(e){return'\x3cdiv class\x3d"ssf-product-preview"\x3e'+c(e.productImage,"","","ssf-title-label")+"\x3c/div\x3e"},c=function(e){var g=1<arguments.length&&arguments[1]!==w?arguments[1]:"",h=2<arguments.length&&arguments[2]!==w?arguments[2]:"",p=3<arguments.length&&arguments[3]!==w?arguments[3]:"";e=e.startsWith("http")?e:"https://m.media-amazon.com/images/G/01/share-icons/"+
e;return h||p?'\x3cimg class\x3d"'+g+'" '+(p?'aria-labelledby\x3d"'+p+'"':"")+" "+(h?'aria-label\x3d"'+h+'"':"")+' src\x3d"'+e+'"/\x3e':k(e,g)},f=function(){return'\x3cspan class\x3d"a-size-mini ssf-rating-count"\x3e'+(0<arguments.length&&arguments[0]!==w?arguments[0]:"")+"\x3c/span\x3e"},b=function(e){return'\x3cul class\x3d"ssf-options-box-container a-unordered-list a-nostyle"\x3e'+e.values.map(function(g,h){var p=t.extend(g,{id:e.id}),l={id:e.id,position:h,val:p,background:g.url};e.isQuote&&(l=
t.extend(l,{center:!0,width:150,content:p.displayText,background:w}));p=l.id;h=l.position;g=l.content;g=g===w?"":g;var x=l.width,m=x===w?100:x,G=l.background;x=l.center;x=x===w?!1:x;l=l.val;m='style\x3d"width: '+m+"px;background-image: url("+(G===w?"":G)+");background-size: "+m+"px "+m+'px;"';G=JSON.stringify(l);h=p+h;l=l.label||"";var M='\x3cspan class\x3d"aok-offscreen"\x3e'+l+"\x3c/span\x3e";x&&(M='\x3cspan class\x3d"a-box-inner a-text-center ssf-q-text"\x3e'+g+"\x3c/span\x3e");return'\x3cli class\x3d"ssf-options-box" aria-label\x3d\''+
l+"'\x3e\n              \x3cinput id\x3d\""+h+'" type\x3d"radio" name\x3d"'+p+"\" value\x3d'"+G+"' aria-label\x3d'"+l+"'\x3e\x3c/input\x3e\n              \x3clabel for\x3d\""+h+'" class\x3d"a-box a-text-normal" '+m+"\x3e"+M+"\x3c/label\x3e\n            \x3c/li\x3e"}).join("")+"\x3c/ul\x3e"},q=function(e){var g=1<arguments.length&&arguments[1]!==w?arguments[1]:"",h=2<arguments.length&&arguments[2]!==w?arguments[2]:!1;return'\x3cli class\x3d"a-tab-heading ssf-customize-tab '+(h?"a-active":"")+'" data-a-tab-name\x3d"ssf-tab-'+
e+'" role\x3d"presentation"\x3e\n              \x3ca aria-label\x3d"'+g+'" href\x3d"#" role\x3d"tab" aria-selected\x3d"'+(h?"true":"false")+'" '+(h?"":'tabindex\x3d"-1"')+"\x3e"+g+"\x3c/a\x3e\n            \x3c/li\x3e"},v=function(e){return'\x3cdiv data-a-name\x3d"ssf-tab-'+e+'" class\x3d"ssf-tab-'+e+" a-box a-box-tab a-tab-content "+(3<arguments.length&&arguments[3]!==w&&arguments[3]?"":"a-hidden")+' a-padding-mini" role\x3d"tabpanel" tabindex\x3d"0"\x3e\n              '+(1<arguments.length&&arguments[1]!==
w?arguments[1]:"")+"\n            \x3c/div\x3e"},E=function(){return(0<arguments.length&&arguments[0]!==w?arguments[0]:[]).map(function(e){e=e.replace(/"|”|“/g,"");return{displayText:"“"+e+"”",value:e}})};return{getTabs:function(e,g){var h=e.popularHighlightStrings;if(!g.length)return"";var p="",l="",x=-1;g.forEach(function(m,G){m.isQuote&&(m.values=E(h));if(!m.values.length)return"";-1===x&&(x=G);G=G===x;p+=q(m.id,m.heading,G);l+=v(m.id,b(m),m.text,G)});return'\x3cdiv class\x3d"a-tab-container a-size-small"\x3e\x3cul data-action\x3d"a-tabs" class\x3d"a-tabs a-declarative ssf-customize-tab a-spacing-small" role\x3d"tablist" data-a-tabs\x3d\'{"name": "customize-tabs"}\'\x3e\n        '+
(p+"\x3c/ul\x3e"+l)+"\x3c/div\x3e"},getCustomizeBox:function(e){return'\x3cdiv class\x3d"a-box a-color-alternate-background a-spacing-top-large a-padding-base ssf-customize-box"\x3e\n      \x3ch5 class\x3d"a-size-small a-spacing-micro"\x3e'+(e.taf_custshare_customizelong+'\x3c/h5\x3e\x3cp class\x3d"a-size-small a-color-secondary"\x3e')+(e.taf_custshare_customizedesc+'\x3c/p\x3e\x3cspan class\x3d"a-button a-button-small" id\x3d"ssf-customize-share"\x3e\n      \x3cspan class\x3d"a-button-inner"\x3e\n        \x3cbutton class\x3d"a-button-text" type\x3d"button"\x3e')+
(e.taf_custshare_customizeshort+"\x3c/button\x3e\n      \x3c/span\x3e\n    \x3c/span\x3e\n    \x3c/div\x3e")},getBackArrow:function(e){e=e["taf-share-general-gobacktopage"]||"";return'\x3cbutton type\x3d"button" class\x3d"ssf-back-btn a-padding-small" aria-label\x3d"'+e+'" tabindex\x3d"0"\x3e\x3cimg src\x3d"https://m.media-amazon.com/images/G/01/share-icons/arrow-left.svg" alt\x3d"'+(e+'"\x3e\x3c/button\x3e')},tabsContainer:'\x3cdiv class\x3d"a-row a-spacing-top-micro ssf-tabs a-color-base-background a-padding-mini"\x3e\x3c/div\x3e',
getImageSection:function(e){var g=n(e);var h=e.isCafPreviewGenerationMigrationEnabled;var p=e.customize,l=e.customizePreSelected;h=e.caf&&h?!0:p&&l?!0:!1;p='\x3cdiv class\x3d"a-padding-base ssf-preview-container"\x3e\n      '+(e.customize?'\x3cspan id\x3d"ssf-customize-icon" class\x3d"ssf-customize-icon"\x3e'+k("customize")+"\x3c/span\x3e":"")+'\n      \x3cspan class\x3d"a-spinner a-spinner-medium a-align-center ssf-preview-spinner aok-hidden"\x3e\x3c/span\x3e\n    \x3c/div\x3e';h='\x3cdiv class\x3d"a-box ssf-preview-box"\x3e\n              \x3cdiv class\x3d"ssf-backend-preview '+
(h?"":"aok-hidden")+'"\x3e'+p+'\x3c/div\x3e\n              \x3cdiv class\x3d"ssf-html-preview '+(h?"aok-hidden":"")+'"\x3e';var x=e.customize;l=e.t;p=d({productImage:e.productImage});var m=e.starRating,G=m===w?"ZERO":m;m=e.customize;m=m===w?!1:m;var M=e.numberOfReviews,I=e.caf;e=e.isUnrecognizedUsersRichPreviewEnabled;G=c("RIO"+G+(D?"r":"")+".png","ssf-caf-stars",G+" star rating");M=f(M);e='\x3cdiv class\x3d"ssf-caf-rating"\x3e\n              \x3cdiv class\x3d"'+(I||e||m?"ssf-caf-rating-left":"ssf-caf-rating-right")+
'"\x3e\n                '+G+M+"\n              \x3c/div\x3e\n            \x3c/div\x3e";x=x?'\x3cspan id\x3d"ssf-customize-icon" class\x3d"ssf-customize-icon"\x3e'+k("customize")+"\x3c/span\x3e":"";l='\x3cp class\x3d"a-size-base a-spacing-micro ssf-caf-text"\x3e'+l.taf_custshare_caf_recipientemoji+"\x3c/p\x3e";m=c("caf-emojis"+(D?"r":"")+".png","ssf-caf-emojis","A heart eyes emoji, a thinking emoji, and a frowning emoji");return h+('\x3cdiv class\x3d"a-padding-base ssf-preview-container"\x3e\n              '+
x+'\n              \x3cspan class\x3d"a-spinner a-spinner-medium a-align-center ssf-preview-spinner aok-hidden"\x3e\x3c/span\x3e\n              '+p+"\n              "+e+'\n            \x3c/div\x3e \x3cdiv class\x3d"ssf-caf-preview"\x3e\n              \x3cdiv class\x3d"a-padding-base ssf-caf-image"\x3e\n                \x3cdiv class\x3d"a-row ssf-caf-image-stickers"\x3e'+(p+('\x3cdiv class\x3d"a-column ssf-caf-stickers"\x3e'+l+m+"\x3c/div\x3e\x3c/div\x3e\n                  ")+e+"\n                \x3c/div\x3e\n            \x3c/div\x3e\x3c/div\x3e\n              "))+
g+"\n            \x3c/div\x3e"},getHmpImageSection:function(e){var g=e.productImage;e='\x3cdiv class\x3d"a-color-secondary a-padding-small ssf-title-text-hmp"\x3e\n    \x3cspan\x3e\n    '+a.sanitizeInput(e.hmpState.title)+"\n    \x3c/span\x3e\n    \x3c/div\x3e";return'\x3cdiv class\x3d"a-box ssf-preview-box"\x3e\n                '+d({productImage:g})+"\n                "+e+"\n            \x3c/div\x3e"},getCustomizePreviewImage:function(e){return'\x3cdiv class\x3d"a-box ssf-no-border ssf-cus-img-container"\x3e\n      \x3cdiv class\x3d"ssf-cus-img"\x3e\x3cspan class\x3d"a-spinner a-spinner-medium a-align-center ssf-preview-spinner aok-hidden"\x3e\x3c/span\x3e\x3c/div\x3e\n      '+
n(e,"ssf-product-title-text-small")+"\n    \x3c/div\x3e"},getToggleContainer:function(e){var g=2<arguments.length&&arguments[2]!==w?arguments[2]:"",h=(1<arguments.length&&arguments[1]!==w?arguments[1]:"").match(/^T(\d+)$/);h=e["taf_custshare_caf_ingress"+(h?"_alt"+h[1]:"")];var p='\x3csmall\x3e\x3ca class\x3d"ssf-caf-toggle-ed-ingress a-size-base a-link-normal"\x3e'+(e.taf_custshare_caf_ingress_learn_more||"Learn more")+"\x3c/a\x3e\x3c/small\x3e",l=k("https://m.media-amazon.com/images/G/01/AppFirst/ConsultAFriend/information-default.png");
return'\x3cdiv class\x3d"a-row a-spacing-top-medium-plus a-grid-vertical-align a-grid-center a-spacing-micro"\x3e\n      \x3cdiv class\x3d"a-column a-span1"\x3e\x3cdiv class\x3d"a-checkbox a-declarative a-checkbox-fancy ssf-caf-toggle" data-action\x3d"cafCheckboxAction"\x3e\n      \x3clabel class\x3d"a-padding-none" aria-labelledby\x3d"caf-checkbox-label"\x3e\n        \x3cinput class\x3d"a-declarative" name\x3d"caf" type\x3d"checkbox"\x3e\n        \x3ci class\x3d"a-icon a-icon-checkbox"\x3e\x3c/i\x3e\n      \x3c/label\x3e\n    \x3c/div\x3e\n  \x3c/div\x3e\n      \x3cdiv class\x3d"a-column a-span10"\x3e\n        \x3csmall id\x3d"caf-checkbox-label" class\x3d"ssf-caf-toggle-label a-size-base"\x3e'+
h+".\x3c/small\x3e\n        "+(g===u.CAF_INFO_ICON_KEY?'\x3cspan class\x3d"ssf-info-icon ssf-caf-toggle-ed-ingress"\x3e\x3cstrong\x3e'+l+"\x3c/strong\x3e\x3c/span\x3e":g===u.CAF_LEARN_MORE_KEY?p:"")+"\n      \x3c/div\x3e\n    \x3c/div\x3e"},getEducationCXBody:function(e){return'\x3cdiv class\x3d"a-box ssf-no-border"\x3e\n        \x3cdiv class\x3d"a-color-secondary a-padding-small"\x3e\n      \x3cspan\x3e\n        '+((e.taf_custshare_caf_education_body||"Ask your friends for help. Use this option to ask friends to react to the item with an emoji. You can share the link by messaging your friends or posting on social media. You’ll get a notification for each reaction.")+
'\n      \x3c/span\x3e\n    \x3c/div\x3e\n        \x3cdiv class\x3d"ssf-caf-education-video a-padding-base"\x3e\n          \x3cvideo id\x3d"ssf-caf-education-video" loop playsinline\x3e\n            \x3csource src\x3d"https://m.media-amazon.com/images/G/01/AppFirst/ConsultAFriend/caf-education-no-audio.mp4" type\x3d"video/mp4"\x3e\n          \x3c/video\x3e\n        \x3c/div\x3e\n      \x3c/div\x3e')}}});"use strict";var qa="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:
function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};L.when("A","SocialShareWidget","SocialShareWidgetAPI","SocialShareWidgetState").register("SocialShareWidgetCustomizeUtils",function(t,A,D,u){function a(g){var h=g.values,p=h.BackgroundImageTab,l=h.DeviceCoverImageTab,x=h.BookQuotesTab;h=h.isConsultAFriendPreview;var m=g.productImageProperties;g=m.width;m=m.height;return{bgId:(p===w?{}:p).physicalId||"",deviceId:(l===w?{}:l).physicalId||
"",quoteValue:(x===w?{}:x).value||"",isConsultAFriendPreview:h===w?!1:h,width:g===w?"":g,height:m===w?"":m}}function k(g,h){var p=g.shareUrl,l=g.socialLinks,x=l===w?{}:l;l=g.isOGTEnabled;l=l===w?!1:l;p.refMarker.isBestFormatEnabled=g.isBestFormatEnabled;p=h?p.getReturnForChannel(h):p.return;h=h.replace(q.CUSTOM_SHARE_OPTIONS_REF_PREFIX+"_","");x=x.shareframework||g.url;var m=g.aapiBaseUrl;m=m===w?"":m;var G=g.shareAapiCsrfToken;G=G===w?"":G;var M=g.tinyUrlEnabled;M=M===w?!1:M;var I=g.deeplinkInfo;
I=I===w?{}:I;var J=g.isOnShareGatingEnabled;J=J===w?!1:J;var r=g.shareDataAttributes;g=r.marketplaceId;g=g===w?"":g;r=r.asin;r=r===w?"":r;var z=c();return{tinyUrlEnabled:M,aapiBaseUrl:m,shareAapiCsrfToken:G,marketplaceId:g,asin:r,url:p,osType:z,isOGTEnabled:l,originalUrl:x||p,refMarkerId:e++,deeplinkInfo:I,isOnShareGatingEnabled:J,extractedRef:h}}function n(g,h,p,l){if(p.isEmpty()||qa(p.currentImage)===w||qa(p.currentImage)!==w&&!p.currentImage.length)return l({});p=encodeURIComponent(p.currentImage);
D.build(g).externalizeImage(p,l,h)}function d(g,h,p){D.build(g).generateImage(h,function(l){p(l.entity)})}function c(){switch(!0){case t.capabilities.ios:return"ios";case t.capabilities.android:return"android";default:return"unknown"}}A=A.SocialShareCore;var f=t.constants.HIDE_CLASS,b=t.$,q=A.Constants,v=A.Metrics,E=A.Url,e=0;return{getEventName:function(g){return"a:sheet:after"+g+":ssf-customize-bottom-sheet"},getCustomizeImage:function(){return b(".ssf-cus-img")},getCustomizeImageContainer:function(){return b(".ssf-cus-img-container")},
getRegularImage:function(){return b(".ssf-backend-preview .ssf-preview-container")},getPreviewBox:function(){return b(".ssf-preview-box")},setImage:function(g){this.imageState.currentPreview.css("background-image",'url("'+g+'")')},showSpinner:function(){this.imageState.currentPreview.find(".a-spinner").removeClass(f)},hideSpinner:function(){this.imageState.currentPreview.find(".a-spinner").addClass(f)},transitionToCustomizePage:function(){b(".ssf-customize-container-one").addClass(f);b(".ssf-customize-container-two").removeClass(f).addClass("ssf-customize-transition")},
transitionToCAFEducationPage:function(){b(".ssf-customize-container-one").addClass(f);b(".ssf-customize-container-three").removeClass(f).addClass("ssf-customize-transition");var g=b("#ssf-caf-education-video").get(0);g&&(g.currentTime=0,g.play())},isCAFEducationPageVisible:function(){return b(".ssf-customize-container-three").is(":visible")},adjustCustomizedPreviewHeight:function(){this.getCustomizeImageContainer().css({width:.76*B.innerWidth});var g=parseInt(this.getCustomizeImage().css("border-left-width"))+
parseInt(this.getCustomizeImage().css("border-right-width")),h=this.getCustomizeImage().innerWidth();this.getCustomizeImage().css({height:(h+g)/1.91})},adjustPreviewHeight:function(){this.getPreviewBox().css({width:.93*B.innerWidth});var g=parseInt(this.getRegularImage().css("border-left-width"))+parseInt(this.getRegularImage().css("border-right-width")),h=this.getRegularImage().innerWidth();this.getRegularImage().css({height:(h+g)/1.91})},transitionToDefaultPage:function(){b(".ssf-customize-container-two").addClass(f);
b(".ssf-customize-container-three").addClass(f);b(".ssf-customize-container-one").removeClass(f).addClass("ssf-customize-transition-back")},getImageData:function(g,h){var p=a(h);return{productImageUrl:g.productImage,starRating:g.starRating||"",numberOfReviews:g.numberOfReviews||"",backgroundImagePhysicalId:p.bgId,deviceCoverImagePhysicalId:p.deviceId,bookQuote:p.quoteValue,productImageWidth:p.width,productImageHeight:p.height,consultAFriendPreviewEnabled:h.isConsultAFriendPreview,previewDohEnabled:g.previewDoh}},
resetPreviewState:function(g){g.clear();0<g.defaultCustomizationOptions.length&&g.defaultCustomizationOptions.forEach(function(h){g.set(h)})},getBackendPreviewImage:function(g,h,p){var l=this;l.setImage("");l.showSpinner();d(g,h,function(x){x&&"SUCCEEDED"===x.status?(x=x.customizedImage.url,l.hideSpinner(),l.setImage(x),p(x)):p()})},setCustomizeCSAData:function(g,h){var p=q.customizeShareStateKey;h=a(h);var l=q.TRUE,x=q.FALSE;u.set(p,{backgroundImagePhysicalId:h.bgId,deviceCoverImagePhysicalId:h.deviceId,
hasQuote:0<h.quoteValue.length?l:x,isCustomizedExperienceEnabled:g.customize?l:x,isCustomized:h.bgId||h.deviceId||h.quoteValue?l:x,customizePreSelected:g.customizePreSelected?l:x,isQuotesAvailable:g.popularHighlightStrings?l:x})},prepareShareUrl:function(g,h,p,l,x){this.setCustomizeCSAData(g,this.imageState);n(g,l,this.imageState,function(m){var G=m.entity;m=new URL(g.url);var M=h;G&&G.physicalId?(v.logCounterRefactor("externalizeImageSuccess"),m.searchParams.append("cspi",G.physicalId),M=h+"_"+q.BOOKS_REF_PREFIX):
(g.customizePreSelected&&(v.logCounter("booksPreviewNotAvailable"),M=h+"_"+q.BOOKS_REF_PREFIX+"_"+q.BOOKS_CUSTOMIZE_PREVIEW_NOT_AVAILABLE),(g.caf||g.isUnrecognizedUsersRichPreviewEnabled||g.customize)&&m.searchParams.append("starsLeft","1"),g.eventPreviewTreatment&&"c"!==g.eventPreviewTreatment.toLowerCase()&&(G=g.eventPreviewTreatment.match(/^T(\d+)$/),m.searchParams.append("peakEvent",G[1]),v.logCounterRefactor("EventPreview"+g.eventPreviewTreatment,g.shareDataAttributes.ingress)));g.shareUrl=new E(m.toString(),
g.refId);m=k(g,M);p.fetch({data:m,isAsync:l,callback:function(I){x(I)}})})},imageState:{clear:function(){this.values={}},isEmpty:function(){return b.isEmptyObject(this.values)},values:{},unset:function(g){delete this.values[g.id]},set:function(g){this.values[g.id]=g},defaultCustomizationOptions:[],currentImage:"",isConsultAFriendPreview:!1,currentPreview:"",productImageProperties:{width:0,height:0}}}});"use strict";L.when("A","SocialShareWidget","SocialShareWidgetAPI").register("SocialShareWidgetCAFUtils",
function(t,A,D){function u(c,f){var b=c.shareUrl,q=c.socialLinks;q=q===w?{}:q;var v=c.isOGTEnabled;v=v===w?!1:v;b.refMarker.isBestFormatEnabled=c.isBestFormatEnabled;var E=c.isHmpShareSheet?"hmp":a.CAF_REF_PREFIX;f=f?b.getReturnForChannel(E+"_"+f):b.return;f=new URL(f);(c.caf||c.isUnrecognizedUsersRichPreviewEnabled)&&f.searchParams.append("starsLeft","1");f.searchParams.has("language")||f.searchParams.append("language",B.languageOfPreference||c.locale||"en_US");f=f.toString();b=c.aapiBaseUrl;E=c.shareAapiCsrfToken;
var e=c.tinyUrlEnabled,g=c.deeplinkInfo;g=g===w?{}:g;var h=c.shareDataAttributes.marketplaceId;return{tinyUrlEnabled:e===w?!1:e,aapiBaseUrl:b===w?"":b,shareAapiCsrfToken:E===w?"":E,marketplaceId:h===w?"":h,url:f,isOGTEnabled:v,originalUrl:q.shareframework||c.url||f,refMarkerId:d++,deeplinkInfo:g}}var a=A.SocialShareCore.Constants,k=A.SocialShareCore.Url,n=A.SocialShareCore.Metrics,d=0;return{prepareShareUrl:function(c,f,b,q,v){var E=c.refId;n.logCounterRefactor("CAF.shareChannelClick",c.ingress);
n.startTimer("CAF.fetchCAFAndTinyURL");E=a.CAF_REF_PREFIX+"_"+E;D.build(c).fetchCAFID(function(e,g){var h=new URL(c.url);e&&h.searchParams.append("cafId",e);g&&h.searchParams.append("cafASIN",g);c.shareUrl=new k(h.toString(),E);g=u(c,f);b.fetch({data:g,isAsync:q,callback:function(p){n.stopTimer("CAF.fetchCAFAndTinyURL");v(p,e)}})},q)},prepareHmpShareUrl:function(c,f,b,q,v){var E=c.refId;n.logCounter("HMP.shareChannelClick."+c.ingress);n.startTimer("HMP.fetchPollIdAndTinyURL");E="hmp."+E;D.build(c).fetchHmpPollId(function(e){var g=
new URL(c.url);e&&g.searchParams.append("hmpId",e);c.shareUrl=new k(g.toString(),E);c.url=g.toString();g=u(c,f);b.fetch({data:g,isAsync:q,callback:function(h){n.stopTimer("HMP.fetchPollIdAndTinyURL");t.trigger("ssf:event:hmpPollCreated",c);v(h,e)}})},q)}}});"use strict";L.when("A","SocialShareWidget","SocialShareWidgetTiny").register("SocialShareWidgetNativeUtils",function(t,A,D){var u=A.SocialShareCore.ShareSheet,a=t.constants.HIDE_CLASS,k=A.SocialShareCore.Metrics,n=k.getMetricName(t.$);return{showSpinner:function(d){d.addClass("ssf-noclick");
d.find(".a-spinner").removeClass(a);d.find("i").hide()},hideSpinner:function(d){d.removeClass("ssf-noclick");d.find(".a-spinner").addClass(a);d.find("i").show()},launchNativeShareSheet:function(d,c,f,b){var q=this;this.showSpinner(d.$currentTarget);f=f({shareData:c});var v=c.shareDataAttributes.ingress;c=t.extend(c,{sheetShownCallback:function(){q.hideSpinner(d.$currentTarget)}});D.fetch({data:f,callback:function(E){c.tinyUrl=E;(new u(c)).launch(function(){b(c);k.logCounter("DPX.Desktop.SheetOpen");
k.logCounter(n,"SheetOpen");k.logCounter("SheetOpen");k.logCounterRefactor("SheetOpen",v);q.hideSpinner(d.$currentTarget)})}})}}})});
/* ******** */
